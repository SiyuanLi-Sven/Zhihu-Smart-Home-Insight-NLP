"use strict";(self.webpackChunkheifetz=self.webpackChunkheifetz||[]).push([[8671],{50071:function(e,t,n){n.d(t,{N:function(){return b},Z:function(){return B}});var i=n(22107),o=n(94707),r=n(86325),l=n(85626),a=n(85879),c=n(87363),d=n(25628),s=n.n(d),u=function(e){(0,r._)(n,e);var t=(0,l._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,o._)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.children;return(0,a.tZ)("div",{className:s()("Badge",t),children:n})}}]),n}(c.Component),p=n(55164),h=n(57477),f=n(71728),m=n(43384),v=n(14583),g=n(78322),Z=n(24405),x=function(e){var t=e.vipIcon,n=e.imageToken,i=e.nightModeToken,o=(0,Z.F)().isDarkMode,r=t||{},l=r.url,a=r.nightModeUrl;return o?i?"https://picx.zhimg.com/".concat(i):a:n?"https://picx.zhimg.com/".concat(n):l},b=(0,c.memo)(function(e){var t=e.vipInfo,n=(0,f._)(e,["vipInfo"]),i=x(t);return(0,a.BX)(m.$U,(0,h._)((0,p._)({as:"span",rel:"noopener noreferrer",zaBlock:"VipBadge",zaType:"Button",zaEventType:"Click",onClick:g.Z.show,css:{cursor:"pointer",display:"inline-flex",alignItems:"center"}},n),{children:["​",i?(0,a.tZ)("img",{src:i,alt:"",css:{width:"1em",height:"1em"}}):(0,a.tZ)(v.Z,{css:{height:"1em",width:"1em"}})]}))}),B=u},80828:function(e,t,n){var i=n(20857),o=n(22107),r=n(94707),l=n(87320),a=n(86325),c=n(85626),d=n(85879),s=n(14168),u=n.n(s),p=n(87363),h=n(86616),f=n(38889),m=n(66263),v=n(15299),g=function(e){(0,a._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,o._)(this,n),(e=t.call(this)).state={expanded:!1},e.onExpand=e.handleExpand.bind((0,i._)(e)),e}return(0,r._)(n,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,i=e.ellipsisLength,o=e.expandable,r=e.privacyEnabled,l=e.showPrivacyPage,a=this.state.expanded,c="等 ".concat(t.length," 个"),s=t;return(a||(s=t.slice(0,i)),0===t.length)?null:(0,d.BX)("span",{children:[s.map(function(e,t){return(0,d.BX)("span",{children:[(0,d.tZ)(v.L,{showPrivacyPage:r&&l,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:(0,d.tZ)("span",{className:"ProfileMainPrivacy-pointerWrapper",children:e.name}),children:(0,d.tZ)(h.Link,{to:"".concat(m.rX,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id),children:e.name})}),t<s.length-1?"、":" "]},t)}),!a&&t.length>i&&(o?(0,d.tZ)(f.ZP,{preset:"plain",onClick:this.onExpand,children:c}):c),"话题"]})}}]),n}(p.Component);(0,l._)(g,"propTypes",{topics:u().array.isRequired,user:u().object,ellipsisLength:u().number,expandable:u().bool,noHoverCard:u().bool,privacyEnabled:u().bool,showPrivacyPage:u().bool}),(0,l._)(g,"defaultProps",{ellipsisLength:3,expandable:!0,noHoverCard:!1}),t.Z=g},85703:function(e,t,n){var i=n(20857),o=n(22107),r=n(94707),l=n(87320),a=n(86325),c=n(85626),d=n(85879),s=n(25628),u=n.n(s),p=n(87363),h=n(74128),f=n(38889),m=n(80714),v=function(e){(0,a._)(n,e);var t=(0,c._)(n);function n(){var e;return(0,o._)(this,n),e=t.apply(this,arguments),(0,l._)((0,i._)(e),"handleSubmit",function(){var t=e.props,n=t.onSubmit,i=t.onCancel,o=t.needCancel;(void 0===o||o)&&i(),n()}),e}return(0,r._)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.subtitle,i=e.shown,o=e.onCancel,r=e.className,l=e.isMobile,a=e.confirmText,c=e.cancelText,s=e.showButtonHorizontal,p=e.showConfirmButtonRight,v=(0,d.tZ)(f.ZP,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:a||"确认"},"confirm"),g=(0,d.tZ)(f.ZP,{onClick:o,children:c||"取消"},"cancel"),Z=m.Z.isMobileEntry||l||p?[g,v]:[v,g];return(0,d.tZ)(h.Z,{wrapperClassName:"ConfirmModal-wrapper",className:u()("ConfirmModal",r),title:t,size:m.Z.isMobileEntry||l?"small":"default",subtitle:n,onClose:o,closeButton:!1,buttonGroupOnly:!0,children:i&&(0,d.tZ)(h.w,{direction:m.Z.isMobileEntry||l||s?"horizontal":"vertical",children:Z})})}}]),n}(p.Component);t.Z=v},74914:function(e,t,n){var i=n(22107),o=n(94707),r=n(86325),l=n(85626),a=n(85879),c=function(e){(0,r._)(n,e);var t=(0,l._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,o._)(n,[{key:"render",value:function(){var e=this.props,t=e.isFollowed,n=e.isFollowing;return t?(0,a.tZ)("span",{className:"FollowStatus",children:n?"相互关注":"关注了你"}):null}}]),n}(n(87363).Component);t.Z=c},24794:function(e,t,n){var i=n(20857),o=n(22107),r=n(94707),l=n(87320),a=n(86325),c=n(55164),d=n(57477),s=n(85626),u=n(85879),p=n(7629),h=n(78603),f=n(45913),m=n(83931),v=n(25628),g=n.n(v),Z=n(11362),x=n.n(Z),b=n(88329),B=n.n(b),y=n(14168),C=n.n(y),_=n(87363),k=n(53778),w=n(69383),S=n(43384),E=n(4534),z=n(1733),T=n(54422),N=n(38889),U=n(83215),R=n(80714),A=n(66263),M=n(67927),F=n(40861);function L(e){return e&&e.startsWith("//")?"https:".concat(e):e}function I(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}var V=function(e){(0,a._)(n,e);var t=(0,s._)(n);function n(){var e;return(0,o._)(this,n),e=t.apply(this,arguments),(0,l._)((0,i._)(e),"state",{qrCodeUrl:"",url:""}),(0,l._)((0,i._)(e),"togglerRef",(0,_.createRef)()),(0,l._)((0,i._)(e),"shouldShowMenu",function(){var t=e.props,n=t.onTogglerClick,i=t.disabled;return!1!==n()&&!i}),(0,l._)((0,i._)(e),"handleTogglerClick",function(t){if(!e.shouldShowMenu()){t.preventDefault();return}e.loadQrcodeImage(),e.handleShare(t)}),(0,l._)((0,i._)(e),"handleMouseEnter",function(t){if(!e.shouldShowMenu()){t.preventDefault();return}e.loadQrcodeImage(),e.handleShare(t)}),(0,l._)((0,i._)(e),"open",function(t){e.shouldShowMenu()&&(e.loadQrcodeImage(),e.menu.popover.open(),e.handleShare(t))}),(0,l._)((0,i._)(e),"handleShare",function(){var t=e.props,n=t.id,i=t.type,o=t.getShareText,r=t.zaShareId,l=t.onShare;["live","edu_course","edu_section"].includes(i)||o(n,i),w.Z.trackEvent(e.togglerRef.current,(0,c._)({action:"Share",element:"Button",is_intent:!0,element_name:A.ur[i]},r&&{id:r})),null==l||l()}),(0,l._)((0,i._)(e),"copyLink",function(){var t=e.props,n=t.type,i=t.title,o=t.authorName,r=t.href,l=t.showNotification,a=E.iB[n]||"",c=o&&"匿名用户"!==o&&a?"".concat(o,"的").concat(a," - "):"",d=r?(0,T.BY)(r):e.url();x()("".concat(i?"".concat(i," - "):"").concat(c,"知乎\n").concat(L(d))),l("链接复制成功！")}),(0,l._)((0,i._)(e),"url",function(){var t=e.props,n=t.id,i=t.type,o=t.shouldUseHrefFirst,r=t.href;return o?(0,T.BY)(r):L((0,T.BY)(e.props.url))||"".concat(location.origin,"/").concat(i,"/").concat(n)}),(0,l._)((0,i._)(e),"loadQrcodeImage",function(){var t=e.state.qrCodeUrl,n=e.props,i=n.shouldUseHrefFirst,o=n.href;if(!t){var r="".concat(location.protocol,"//www.zhihu.com/"),l=i?o:"".concat(e.url()).concat("#showWechatShareTip");t="".concat(r,"qrcode?").concat(I({url:l})),e.setState({qrCodeUrl:t,url:l})}}),(0,l._)((0,i._)(e),"shareToWeibo",function(){var t={appKey:"3063806388"},n=e.props.shareText;n&&(t.title=n);var i="http://service.weibo.com/share/share.php?".concat(I(t));window.open(i,"_blank","width=615,height=505")||(location.href=i)}),e}return(0,r._)(n,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,i=t.togglerClassName,o=t.positionStatus,r=t.toggler,l=t.type,a=t.disabled,s=t.placement,m=t.toggleEvent,v=t.stickHover,Z=t.children,x=this.state.qrCodeUrl,b=(0,u.BX)("div",{className:g()("ShareMenu-toggler",i),children:[x&&(0,u.tZ)("img",{className:"ShareMenu-fakeQRCode",src:x,alt:"微信二维码"}),(0,_.cloneElement)(r,{onMouseEnter:this.loadQrcodeImage,disabled:a,ref:this.togglerRef})]}),B="hover"===m?{onMouseEnter:this.handleMouseEnter}:{onClick:this.handleTogglerClick};return(0,u.BX)(_.Fragment,{children:[(0,u.tZ)(U.bY,{input:"s",action:this.open}),(0,u.BX)(S.$U,(0,d._)((0,c._)({as:z.ZP,zaText:!0,zaType:"Button",zaAction:"Share",className:g()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:b,placement:s,toggleEvent:m,stickHover:v},B),{children:[(0,u.BX)(S.$U,{as:z.sN,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.copyLink,children:[(0,u.tZ)(p.n,{size:17,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"]}),"live"===l||(0,u.BX)(S.$U,{as:z.sN,zaType:"Button",zaAction:"Share",zaText:!0,className:"ShareMenu-button",onClick:this.shareToWeibo,children:[(0,u.tZ)(h.kH,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"]}),(0,u.BX)(z.sN,{tag:"div",className:"ShareMenu-wechat",noActive:!0,children:[(0,u.BX)(N.ZP,{className:"ShareMenu-button",preset:"plain",children:[(0,u.tZ)(f.F3,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"]}),(0,u.tZ)("img",{className:"ShareMenu-qrCode",src:x,alt:"微信二维码"})]}),Z]}))]})}}]),n}(_.Component);(0,l._)(V,"propTypes",{toggler:C().node,onTogglerClick:C().func,zaShareId:C().number}),(0,l._)(V,"defaultProps",{toggler:(0,u.tZ)(N.ZP,{preset:"plain",icon:m.xP,label:"分享"}),onTogglerClick:B()}),t.Z=R.Z.isMobileEntry?function(){return null}:(0,k.connect)(function(e,t){var n=t.id,i=t.type,o=e.shareTexts;return{shareText:(null==o?void 0:o["".concat(i).concat(n)])||t.shareText}},{showNotification:M.c0,getShareText:F.kB})(V)},13427:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(85879),o=n(25628),r=n.n(o),l=n(80714);function a(e){var t=e.header,n=e.options,o=e.className,a=e.onRef,c=e.showOptions;return(0,i.BX)("div",{className:r()("Topbar",o,l.Z.isMobileEntry&&"Topbar--mobile"),ref:a,children:[(0,i.tZ)("div",{className:"Topbar-title",children:t}),(void 0===c||c)&&(0,i.tZ)("div",{className:"Topbar-options",children:n})]})}},73596:function(e,t,n){var i=n(55164),o=n(57477),r=n(71728),l=n(85879),a=n(87363),c=n(14168),d=n.n(c),s=n(87038),u=n(41283),p=n(80828);function h(e){var t,n=e.user,c=e.noHeadline,d=(0,r._)(e,["user","noHeadline"]),h=n.headline,f=n.isOrg,m=n.subTitle,v=(0,a.useMemo)(function(){return(0,u.TE)(n.badgeV2||n.badge)},[n]),g=v.identity,Z=v.bestAnswerer,x=v.baike,b=v.title;return m||b?(0,l.tZ)(s.Z,(0,i._)({html:m||b},d)):!f&&(null==Z?void 0:null===(t=Z.topics)||void 0===t?void 0:t.length)?(0,l.BX)("div",(0,o._)((0,i._)({},d),{children:[(0,l.tZ)(p.Z,{topics:Z.topics,user:n}),"的优秀答主"]})):g?(0,l.tZ)("div",(0,o._)((0,i._)({},d),{children:g[0].description})):x?(0,l.tZ)("div",(0,o._)((0,i._)({},d),{children:x.description})):h&&!c?(0,l.tZ)(s.Z,(0,i._)({html:h},d)):null}h.propTypes={user:d().object.isRequired,noHeadline:d().bool},t.Z=(0,a.memo)(h)},67992:function(e,t,n){var i=n(22107),o=n(94707),r=n(87320),l=n(86325),a=n(85626),c=n(85879),d=n(14168),s=n.n(d),u=n(87363),p=n(69383),h=n(30722),f=n(44169),m=n(80714),v=n(30361),g=n(46829),Z=n(74914),x=n(73596),b=n(85661),B=n(21932),y=n(94226),C=function(e){(0,l._)(n,e);var t=(0,a._)(n);function n(){return(0,i._)(this,n),t.apply(this,arguments)}return(0,o._)(n,[{key:"componentDidMount",value:function(){var e=this.props.user;p.Z.setModule(this,{module:"UserItem"},{card:{content:{type:"User",member_hash_id:e.id,follower_num:e.followerCount}}})}},{key:"renderRewardDetails",value:function(){var e=this.props.user,t=e.amount,n=e.rewardCreated;return(0,c.BX)("div",{className:"ContentItem-rewardDetails",children:[(0,c.tZ)("p",{className:"ContentItem-rewardAmount",children:t&&"赞赏了 \xa5".concat(t/100)}),(0,c.tZ)("p",{className:"ContentItem-rewardTime",children:(0,f.rL)(n)})]})}},{key:"render",value:function(){var e=this.props,t=e.user,n=t.urlToken,i=t.isFollowed,o=t.isFollowing,r=t.answerCount,l=t.articlesCount,a=t.followerCount,d=t.id,s=t.isOrg,u=e.user,p=e.type,f=e.isRewardList,C=e.action,_=e.meta,k=e.status,w=e.noTrackCardShow,S=e.onClick,E=e.currentUser,z=!n,T=E&&E.id===d,N=void 0!==C?C:!T&&!z&&(0,c.tZ)(g.Z,{id:u.urlToken,type:p||u.type,preset:g.Z.PRESETS.primary,gender:u.gender,isFollowing:o,onClick:S}),U=void 0!==_?_:z||(0,c.tZ)(x.Z,{user:u}),R=void 0!==k?(0,c.tZ)(v.qb,{children:k}):!z&&(0,c.BX)(v.qb,{children:[!!r&&"".concat((0,h.uf)(r)," 回答"),!!l&&"".concat((0,h.uf)(l)," 文章"),!!a&&"".concat((0,h.uf)(a)," 关注者")]}),A="//www.zhihu.com/".concat(s?"org":"people","/").concat(n||d),M=this.props.userLinkV2;return(0,c.tZ)(v.ZP,{data:u,link:A,image:M?(0,c.tZ)(y.Z,{className:"UserItem-avatar",avatarProps:{size:m.Z.isMobileEntry?46:60},user:u,target:"_blank"}):(0,c.tZ)(b.Z,{className:"UserItem-avatar",avatar:!0,avatarProps:{size:m.Z.isMobileEntry?46:60},user:u,target:"_blank"}),title:(0,c.BX)("div",{className:"UserItem-title",children:[M?(0,c.tZ)(B.Z,{user:u,target:"_blank"}):(0,c.tZ)(b.Z,{user:u,target:"_blank"}),(0,c.tZ)(Z.Z,{isFollowing:o,isFollowed:i})]}),meta:(0,c.BX)("div",{children:[U,R]}),noTrackCardShow:w,extra:f?this.renderRewardDetails():N})}}]),n}(u.Component);(0,r._)(C,"propTypes",{action:s().node,status:s().node,meta:s().node,type:s().string,isRewardList:s().bool,onClick:s().func,currentUser:s().object}),t.Z=C},73831:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(55164),o=n(57477),r=n(71728),l=n(85879),a=n(53778),c=n(29229),d=n(7407),s=n(72111),u=n(65733),p=n(88329),h=n.n(p),f=n(87363),m=n(86616),v=n(69383),g=n(87804),Z=(0,f.forwardRef)(function(e,t){var n=e.isPinProfile,a=e.user,c=e.isPinDaily,d=e.onClick,p=void 0===d?h():d,f=e.children,Z=(0,r._)(e,["isPinProfile","user","isPinDaily","onClick","children"]),x=a.id,b=a.urlToken,B=a.isOrg,y=a.url,C=a.maskLevel,_="//www.zhihu.com/".concat(B?"org":"people","/").concat(b||x),k="zhihu://pin".concat(y,"/moments"),w=(0,u.Z)(function(e){c&&"A"===e.target.nodeName&&v.Z.trackEvent(e.target,{id:2065}),n&&(e.preventDefault(),(0,g.Z)("base/openURL").dispatch({url:k})),C&&e.preventDefault(),p(e)});return(0,l.tZ)(s._o,{zaText:!0,zaBlock:"User",children:(0,l.tZ)(m.Link,(0,o._)((0,i._)({ref:t,to:_,href:_,target:"_blank",onClick:w,className:"UserLink-link","data-za-detail-view-element_name":"User"},Z),{children:f}))})}),x=n(80445),b=function(e){var t=e.user,s=e.noHoverCard,u=e.noLink,p=e.children,h=(0,r._)(e,["user","noHoverCard","noLink","children"]),f=t.id,m=t.urlToken,v=(0,x.e)(t),g=(0,a.useSelector)(function(e){return(0,d.Hu)(e,{includeTablet:!0})}),b=null!=s?s:g,B=(0,c.Z)(function(){return Promise.all([n.e(7232),n.e(8484),n.e(7774),n.e(9597)]).then(n.bind(n,1781))},!b);if(!v||u)return p||null;var y=(0,l.tZ)(Z,(0,o._)((0,i._)({},h),{user:t,children:p}));return b||!B?y:(0,l.tZ)(B,{toggler:y,id:f,urlToken:m,user:t})}},94226:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(55164),o=n(57477),r=n(71728),l=n(85879),a=n(55698),c=n(25628),d=n.n(c),s=n(73831);function u(e){var t=e.className,n=e.user,c=void 0===n?{}:n,u=e.avatarProps,p=void 0===u?{}:u,h=(0,r._)(e,["className","user","avatarProps"]),f=c.name,m=c.avatarUrl;return(0,l.tZ)("span",{className:d()("UserLink",t),children:(0,l.tZ)(s.Z,(0,o._)((0,i._)({},h),{user:c,children:(0,l.tZ)(a.qE,(0,i._)({className:"UserLink-avatar",url:m,alt:f},p))}))})}},21932:function(e,t,n){n.d(t,{Z:function(){return f}});var i=n(55164),o=n(57477),r=n(71728),l=n(85879),a=n(41283),c=n(25628),d=n.n(c),s=n(50071),u=n(73831),p=n(50494),h=n(80445);function f(e){var t,n,c=e.className,f=e.showVipIcon,m=e.vipIconZaViewName,v=e.user,g=void 0===v?{}:v,Z=e.noBadge,x=e.noVipBadge,b=e.children,B=e.badgeProps,y=void 0===B?{}:B,C=(0,r._)(e,["className","showVipIcon","vipIconZaViewName","user","noBadge","noVipBadge","children","badgeProps"]),_=(0,h.e)(g),k=(null===(t=g.vipInfo)||void 0===t?void 0:t.isVip)&&!(void 0!==x&&x),w=_&&f&&(null===(n=g.vipInfo)||void 0===n?void 0:n.vipIcon);return(0,l.BX)("span",{className:d()("UserLink",c),children:[(0,l.tZ)(u.Z,(0,o._)((0,i._)({},C),{user:g,children:b||g.name})),_&&!Z&&(0,l.tZ)(a.Vh,(0,i._)({css:{marginLeft:".3em"},isOrg:g.isOrg,badge:g.badgeV2||g.badge,linkify:!0,enableTooltip:!0},y)),k&&(0,l.tZ)(s.N,{vipInfo:g.vipInfo,css:{marginLeft:".3em"}}),w&&(0,l.tZ)(p.Z,{vipIcon:g.vipInfo.vipIcon,zaViewName:m})]})}},77100:function(e,t,n){n.d(t,{Z:function(){return _}});var i=n(55164),o=n(94009),r=n(49899),l=n(85879),a=n(65733),c=n(53778),d=n(87641),s=n(43384),u=n(53910),p=n(57730),h=n(88329),f=n.n(h),m=n(4773),v=n(25076),g=n(87320),Z=n(57477),x=n(80565),b=n(79107),B=n(7181),y=function(e){var t=e.className,n=e.index,o=e.selected,r=e.onClick,a=e.onDelete,c=e.item,u=e.item,p=u.status,h=u.target,f=(void 0===h?{}:h).parentObject.title,m=0===p,v="ContributionItem-deleteButton",y=(0,l.BX)(s.$U,(0,Z._)((0,i._)({zaType:"Card",zaText:f,view:{elementLocation:{card:{index:void 0===n?0:n}}},as:d.Flex,role:"button",className:t,width:"168px",height:"52px",color:"GBK03A",px:"8px",alignItems:"center",lineHeight:"normal"},m&&{onClick:r}),{css:function(e){var t;return{border:"1px solid ".concat(o?"transparent":m?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK09A),boxShadow:o?"inset 0 0 0 2px ".concat(e.colors.GBL01A):"none",borderRadius:"3px",backgroundColor:e.colors.GBK99C,":hover":(t={background:m?e.colorMod(e.colors.GBL01A).alpha(.08):e.colors.GBK10A},(0,g._)(t,".".concat(v),{visibility:"visible"}),(0,g._)(t,"cursor",m?"pointer":"not-allowed"),t),position:"relative"}},children:[(0,l.tZ)(d.Flex,(0,Z._)((0,i._)({},m&&{color:"GBL01A"}),{fontSize:"11px",fontWeight:"600",alignItems:"center",justifyContent:"space-between",children:(0,l.tZ)(s.$U,{zaBlock:"Delete",zaText:"删除投稿",zaType:"Button",as:d.Box,role:"button",className:v,onClick:function(e){e.stopPropagation(),null==a||a(c)},css:{cursor:"pointer",visibility:"hidden",position:"absolute",right:"-8px",top:"-8px"},children:(0,l.tZ)(b.Z,{size:12,css:function(e){return{color:e.colors.GRD03A,backgroundColor:e.colors.GBK99A,borderRadius:"50%",border:"2px solid ".concat(e.colors.GBK99A)}}})})})),(0,l.tZ)(d.Box,{fontSize:"14px",css:[(0,x.S)(2),{wordBreak:"break-all"}],children:f})]}));return(0,l.tZ)(s.eV,{block:"VideoAnswerItem",children:m?y:(0,l.tZ)(B.Z,{toggler:y,placement:"top",arrowed:!0,toggleEvent:"hover",children:(0,l.tZ)(d.Box,{fontSize:"12px",p:"8px",children:"已投稿问题仅支持在回答详情页编辑"})})})},C=function(e){var t=e.className,n=e.onClick,r=e.totalCount,a=e.currentCount,c=(0,o._)((0,v.Z)("zvideo_contribution_form:should_hide_new_tag"),2),p=c[0],h=c[1];return(0,l.BX)(s.$U,{zaType:"Button",zaAction:"",zaBlock:"AddVideoAnswer",zaText:"添加问题",as:d.Flex,className:t,role:"button",width:"168px",height:"52px",color:"GBL01A",alignItems:"center",justifyContent:"center",onClick:function(e){p||h(!0),null==n||n(e)},css:function(e){return(0,i._)({position:"relative",cursor:"pointer",borderRadius:"3px",border:"1px solid ".concat(e.colorMod(e.colors.GBL01A).alpha(.08)),":hover":{background:e.colorMod(e.colors.GBL01A).alpha(.08)},overflow:"hidden"},!p&&{"::after":{content:'"NEW"',position:"absolute",top:"0",right:"0",color:e.colors.GRD03A,fontSize:"8px",fontWeight:"bold",textAlign:"center",background:e.colorMod(e.colors.GRD03A).alpha(.08),borderBottomLeftRadius:"3px",padding:"4px"}})},children:[(0,l.tZ)(u.nY,{size:12}),(0,l.tZ)(d.Box,{fontSize:"14px",fontWeight:"500",mt:"1px",ml:"5px",children:a&&r?"继续添加 (".concat(a,"/").concat(r,")"):"添加问题"})]})},_=function(e){var t=e.zvideoId,n=e.showCreateButton,i=e.showSelect,o=void 0!==i&&i,s=e.onAdd,u=e.onSelect,h=e.isProduce,v=(0,c.useDispatch)(),g=(0,m.oL)(),Z=(0,m.fh)(t);if(h)Z.reverse();else{var x=Z.filter(function(e){return 2===e.status}),b=Z.filter(function(e){return 2!==e.status});b.reverse(),Z=(0,r._)(b).concat((0,r._)(x))}var B=(0,m.cF)(t).answer,_=void 0===B?{}:B,k=_.canContribute,w=_.totalCount,S=void 0===w?0:w,E=Z.length,z=(0,a.Z)(function(e){v((0,m.O)(e.id)),v((0,m.ry)(e.id)),null==u||u(e)}),T=(0,a.Z)(function(e){p.Z.confirm((0,l.tZ)(d.Box,{textAlign:"center",children:"已编辑的投稿内容不会被保存"}),{title:(0,l.tZ)(d.Box,{ml:"23px",children:"确定删除该视频投稿？"}),text:{ok:"确认删除",cancel:"继续编辑"}}).then(function(){if(e.status&&0!==e.status){var n=e.target.object.id;n&&v((0,m.EB)(t,e.id,n))}else v((0,m.KQ)(t,e.id));v((0,m.O)(null))},f())});return(0,l.tZ)(d.Flex,{flexWrap:"wrap",ml:"-8px",children:(0,l.BX)(l.HY,{children:[Z.map(function(e){return(0,l.tZ)(y,{selected:o&&(null==g?void 0:g.id)===e.id,onClick:function(){return z(e)},onDelete:function(){return T(e)},item:e,css:{marginLeft:"8px"}},e.id)}),void 0!==k&&k&&E<S&&void 0!==n&&n&&(0,l.tZ)(C,{onClick:s,currentCount:E,totalCount:S,css:{marginLeft:"8px"}})]})})}},18362:function(e,t,n){var i=n(85879),o=n(65733),r=n(88329),l=n.n(r),a=n(87641),c=n(43384),d=n(57730),s=n(38889),u=n(95377),p=n(38876);t.Z=function(e){var t=e.isEditing,n=e.onSubmit,r=e.onCancel,h=e.selectedQuestion,f=e.value,m=e.onChange,v=(0,o.Z)(function(){n()}),g=(0,o.Z)(function(){f?d.Z.confirm((0,i.tZ)(a.Box,{textAlign:"center",children:t?"已编辑的投稿内容不会被保存":"当前输入的投稿内容不会被保存"}),{title:(0,i.tZ)(a.Box,{ml:"23px",children:t?"确定取消当前修改":"确定返回选择其他问题？"}),text:{ok:t?"取消修改":"确定返回",cancel:t?"继续编辑":"继续投稿"}}).then(r,l()):r()});return(0,i.BX)(c.eV,{block:"AnswerEditor",children:[(0,i.tZ)(p.Z,{selected:!0,item:h,css:{padding:"0 20px",marginTop:"24px"}}),(0,i.tZ)(c.$U,{zaType:"Input",zaAction:"Answer",as:a.Box,px:"20px",mt:"17px",flex:"1",children:(0,i.tZ)(u.Z,{autoFocus:!0,maxLength:"150000",value:f,onChange:function(e){m(e.target.value)},css:{width:"100%",height:"100%!important",textarea:{height:"100%"}},multiline:!0,placeholder:"针对问题介绍下视频（选填）"})}),(0,i.BX)(a.Flex,{height:"82px",justifyContent:"space-between",alignItems:"center",px:"20px",css:{button:{width:"236px"}},children:[(0,i.tZ)(c.$U,{zaType:"Button",zaAction:"Close",zaText:!0,as:s.ZP,onClick:g,children:t?"取消修改":"返回选择"}),(0,i.tZ)(c.$U,{zaType:"Button",zaAction:"Save",zaText:!0,as:s.ZP,onClick:v,preset:"primary",color:"blue",children:t?"提交修改":"添加投稿"})]})]})}},38876:function(e,t,n){var i=n(85879),o=n(87363),r=n(43384),l=n(30722),a=n(38889),c=n(87641),d=c.Box,s=c.Flex;t.Z=function(e){var t=e.className,n=e.index,c=e.onSelect,u=e.selected,p=e.item,h=p.title,f=p.followCount,m=p.commentCount,v=p.visitCount,g=p.highlight,Z=(0,o.useMemo)(function(){return[f,m,v].every(function(e){return"number"==typeof e})?["".concat((0,l.ok)(f)," 关注"),"".concat((0,l.ok)(m)," 评论"),"".concat((0,l.ok)(v)," 浏览")].join(" \xb7 "):null},[f,m,v]);return(0,i.BX)(r.$U,{zaBlock:"QuestionItem",zaType:"Card",zaText:Z,view:{elementLocation:{card:{index:void 0===n?0:n}}},as:s,py:"12px",alignItems:"start",className:t,children:[(0,i.BX)(d,{flex:"1",children:[(0,i.tZ)(d,{fontSize:"15px",fontWeight:"500",dangerouslySetInnerHTML:{__html:(null==g?void 0:g.title)||h},css:function(e){return{wordBreak:"break-all",em:{fontStyle:"inherit",color:e.colors.GYL01A}}}}),Z&&(0,i.tZ)(d,{mt:"3px",color:"GBL05A",fontSize:"14px",children:Z})]}),void 0!==u&&u?(0,i.tZ)(a.ZP,{preset:"secondary",color:"blue",css:{cursor:"unset"},children:"已选择"}):(0,i.tZ)(a.ZP,{onClick:c,color:"blue",css:{padding:"0 9px",marginLeft:"20px"},children:"选择问题"})]})}},70938:function(e,t,n){var i=n(55164),o=n(57477),r=n(94009),l=n(85879),a=n(99178),c=n(36892),d=n(65733),s=n(49274),u=n(82644),p=n(44066),h=n(88329),f=n.n(h),m=n(73411),v=n.n(m),g=n(87363),Z=n(53778),x=n(87641),b=n(43384),B=n(5941),y=n(81956),C=n(4773),_=n(38876),k=v()(1);t.Z=function(e){var t=e.title,n=e.description,h=e.zvideoId,m=e.onSelect,v=(0,y.Z)(),w=(0,Z.useDispatch)(),S=(0,g.useRef)(),E=(0,r._)((0,g.useState)(!1),2),z=E[0],T=E[1],N=(0,r._)((0,g.useState)(""),2),U=N[0],R=N[1],A=(0,r._)((0,g.useState)([]),2),M=A[0],F=A[1],L=(0,Z.useSelector)(function(e){return e.zvideos.contribution[z?"questionSearchResults":"recommendQuestions"]}),I=L.isLoading,V=L.paging.isEnd,P=L.data,D=(0,b.Q4)(),X=(0,c.Z)(function(e){return k(function(){return v("/api/v4/search/suggest",{query:{q:e},headers:{"X-API-Version":"3.0.91","X-App-Za":"OS=Web"}})}).then(function(e){F(e.payload.suggest.map(function(e,t){return(0,o._)((0,i._)({},e),{name:e.query,index:t})}))},f())},500),G=(0,g.useCallback)(function(){S.current&&(S.current.scrollTop=0)},[]),H=(0,d.Z)(function(e){e!==U&&(R(e),e?X(e):(G(),T(!1),F([])))}),K=(0,d.Z)(function(e,t){var n=t.index;D.trackEvent({eventType:"Click",action:"Question",block:"SuggestItem",elementLocation:{type:"Text",text:e,card:{index:n}}}),G(),R(e),T(!0),w((0,C.nL)(e,!0))}),W=(0,d.Z)(function(){U&&(G(),T(!0),w((0,C.nL)(U,!0)))}),O=(0,d.Z)(function(){P.length&&(U?w((0,C.nL)()):w((0,C.GC)()))});return(0,g.useEffect)(function(){w((0,C.GC)({zvideoId:h,title:t,description:n},!0))},[h,t,n,w]),(0,l.BX)(l.HY,{children:[(0,l.tZ)(x.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),(0,l.tZ)(B.Z,{autoSelect:!1,value:U,onChange:H,onSelect:K,onEnterInput:W,items:M,css:{".Popover":{width:"100%",padding:"0 20px",boxSizing:"border-box"},".Input-wrapper":{width:"100%"}},inputProps:{grey:!0,placeholder:"搜索相关问题…",after:U?(0,l.tZ)(u.HN,{size:16,css:function(e){return{cursor:"pointer",color:e.colors.GBK07A}},onClick:function(){return H("")}}):(0,l.tZ)(p.J7,{size:20,css:function(e){return{color:e.colors.GBL05A}}})},menuProps:{style:{width:"470px"}}}),V&&!P.length?(0,l.tZ)(s.H.EI1,{image:"default",content:"暂无相关问题"}):(0,l.tZ)(a.ZP,{onRef:S,css:{flex:"1",padding:"0 20px",overflowY:"auto"},isLoading:I,isDrained:V,onLoad:O,getContainer:function(e){return e},children:P.map(function(e,t){return(0,l.tZ)(_.Z,{onSelect:function(){m(e)},index:t,item:e,css:function(e){return{"& + &":{borderTop:"1px solid ".concat(e.colors.GBK09A)}}}},e.id)})})]})}},25229:function(e,t){t.Z=function(e){return e?e.replace(/\n/g,"<br>"):e}},89897:function(e,t,n){n.d(t,{Z:function(){return E}});var i=n(94009),o=n(85879),r=n(87363),l=n.n(r),a=n(53778),c=n(87641),d=n(43384),s=n(47842),u=n(38889),p=n(4773),h=n(77100),f=n(18362),m=n(70938),v=n(55164),g=n(57477),Z=n(65733),x=n(88329),b=n.n(x),B=n(57730),y=n(67927),C=n(25229),_=function(e){var t=e.selectedQuestion,n=e.answerContent,i=e.checkRange,l=e.onClose,s=e.shouldPublish,u=e.setSelectedQuestion,h=e.selectedContribution,f=e.zvideoId,m=e.isEditing,x=e.duration,_=e.editorRef,k=e.closeAfterEdit,w=e.reset,S=e.MIN_RANGE,E=(0,d.Q4)(),z=(0,a.useDispatch)();return{onCancel:(0,Z.Z)(function(){E.trackEvent({eventType:"Click",action:"Close",block:"Modal",elementLocation:{type:"Button"}}),t&&n?B.Z.confirm((0,o.tZ)(c.Box,{textAlign:"center",children:"当前视频投稿内容离开后不保存"}),{title:(0,o.tZ)(c.Box,{ml:"23px",children:"取消当前视频投稿编辑吗？"}),text:{ok:"继续编辑",cancel:"取消离开"}}).then(b(),l):l()}),onComplete:(0,Z.Z)(function(){s?z((0,p.__)(f)).then(function(){z((0,y.c0)("投稿成功，审核后自动发布")),l()}):l()}),onSelectQuestion:(0,r.useCallback)(function(e){i&&i()||u(e)},[i,u]),onSubmit:(0,Z.Z)(function(){var e={startTime:0,endTime:x,content:(0,C.Z)(n)};m?z((0,p.uw)(h.id,e)).then(function(){if(k)l();else{var e;w(),null===(e=_.current)||void 0===e||e.changeRange(0,_.current.getDuration())}}).catch(function(e){var t=e.payload.message;z((0,y.c0)(t||"添加失败"))}):z((0,p.gq)(f,(0,g._)((0,v._)({},e),{target:{parentObject:{type:"question",id:t.id,title:t.title},object:{type:"answer"}}}),x)).then(function(){var e;w(),null===(e=_.current)||void 0===e||e.autoNextRange(S)}).catch(function(e){var t=e.payload.message;z((0,y.c0)(t||"添加失败"))})}),onCancelEdit:(0,Z.Z)(function(){m&&k?l():w()})}},k=n(66980),w=Object.assign,S=function(e){return l().createElement(k.Z,w({width:"153",height:"104",fill:"none",viewBox:"0 0 153 104"},e),l().createElement("path",{fill:"#F0F4F7",fillRule:"evenodd",d:"M95.97 102.732H45.137c-13.147 0-23.805-10.651-23.805-23.79 0-37.472 30.396-67.85 67.893-67.85 27.184 0 49.221 22.023 49.221 49.19 0 23.445-19.017 42.45-42.476 42.45Z",clipRule:"evenodd"}),l().createElement("path",{stroke:"#2B6BCC",strokeLinecap:"round",strokeWidth:".475",d:"M73.088 40.905v20.068M39.27 64.164v24.009M110.813 64.164v34.1"}),l().createElement("path",{stroke:"#D3E0ED",strokeLinecap:"round",strokeWidth:".475",d:"M110.813 14.992v16.205M39.199 29.223v8.56M33.03 37.754h99.165M28.754 64.125h112.104"}),l().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M.015 101.856h152.816L76.423 11.907.015 101.856Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M81.32 27.703a4.895 4.895 0 0 1-4.897 4.894 4.895 4.895 0 0 1-4.897-4.894 4.895 4.895 0 0 1 4.897-4.893 4.895 4.895 0 0 1 4.897 4.893Z",clipRule:"evenodd"}),l().createElement("path",{stroke:"#D3E0ED",strokeWidth:".633",d:"M76.423 14.321V.811"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M61.587 29.415H91.26c.853 0 1.308-1.007.743-1.646L76.423 10.132 60.844 27.769c-.564.64-.11 1.646.743 1.646ZM8.472 103.516h142.657V96.19H8.472v7.326Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M15.014 96.116h33.27V88.79h-33.27v7.326ZM50.03 70.63l9.3 24.354-2.967 1.132-9.3-24.355 2.967-1.13Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"m57.15 76.295 6.94 18.175-4.316 1.646-6.94-18.175 4.316-1.646Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M15.014 79.644H49.43V77.5H15.014v2.144Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M11.25 88.79h33.271v-3.663h-33.27v3.663ZM17.548 77.5h30.737v-2.642H17.548V77.5Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M17.809 84.866H48.25v-4.96H17.809v4.96Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M17.548 85.127h30.964v-5.483H17.548v5.483Zm.522-.522h29.92v-4.439H18.07v4.439Z",clipRule:"evenodd"}),l().createElement("path",{stroke:"#fff",strokeWidth:"1.095",d:"M76.423 33.84v2.178M79.776 33.063l1.541 1.54M82.135 31.197h2.18M68.363 31.197h2.18M71.436 34.603l1.54-1.54"}),l().createElement("path",{stroke:"#D3E0ED",strokeWidth:"1.133",d:"M140.533 96.372c-2.182-9.496-.74-19.823 4.845-28.733"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M147.924 67.603c-.988.704-2.073.877-2.422.387-.348-.49.17-1.457 1.159-2.16.989-.704 2.073-.876 2.422-.386.349.489-.17 1.456-1.159 2.16Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M144.759 65.51c.704.987.877 2.071.387 2.42-.49.348-1.458-.17-2.162-1.159-.703-.988-.876-2.071-.386-2.42.49-.348 1.458.17 2.161 1.158ZM145.6 73.984c-1.394.659-2.788.634-3.115-.057-.327-.69.538-1.784 1.931-2.443 1.394-.659 2.788-.633 3.115.057.327.69-.538 1.784-1.931 2.443Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M142.109 70.66c.66 1.393.634 2.786-.057 3.113-.69.327-1.785-.538-2.444-1.93-.659-1.393-.634-2.787.057-3.113.69-.327 1.785.537 2.444 1.93ZM143.964 81.107c-1.607.76-3.216.731-3.593-.065-.377-.796.621-2.058 2.228-2.818 1.608-.76 3.216-.73 3.593.066.377.796-.621 2.057-2.228 2.817Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M139.938 77.273c.761 1.607.732 3.214-.065 3.59-.797.378-2.059-.62-2.82-2.225-.761-1.607-.731-3.215.065-3.591.797-.377 2.06.62 2.82 2.226ZM143.224 87.524c-1.527.912-3.131 1.039-3.583.283-.452-.756.418-2.108 1.945-3.02 1.526-.912 3.13-1.038 3.582-.283.452.756-.418 2.108-1.944 3.02Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M138.845 84.098c.912 1.525 1.039 3.128.283 3.58-.757.452-2.11-.418-3.023-1.943-.912-1.525-1.039-3.128-.282-3.58.756-.452 2.109.418 3.022 1.943ZM144.305 93.69c-1.507 1.384-3.285 1.9-3.971 1.154-.686-.746-.021-2.473 1.487-3.857 1.507-1.384 3.285-1.9 3.971-1.153.686.746.02 2.473-1.487 3.856Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M138.571 90.849c1.384 1.506 1.901 3.283 1.154 3.97-.747.685-2.475.02-3.859-1.487-1.385-1.506-1.901-3.282-1.154-3.968.747-.687 2.474-.021 3.859 1.485ZM129.951 96.157h-10.3V84.28c0-.36.293-.654.655-.654h8.99c.362 0 .655.293.655.654v11.877Z",clipRule:"evenodd"}),l().createElement("path",{stroke:"#D3E0ED",strokeWidth:"1.634",d:"M129.296 87.595h1.069a2.31 2.31 0 0 1 2.311 2.31v.488a2.31 2.31 0 0 1-2.311 2.31h-1.069"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M125.974 72.734c-.263.388-.538.758-.701 1.174a2.514 2.514 0 0 0-.21 1.244c.089.826.641 1.546 1.238 2.216l.226.258c.08.103.164.202.238.31.139.22.265.456.33.714a2.376 2.376 0 0 1-.1 1.54c-.407.955-1.299 1.546-2.195 1.775.796-.48 1.47-1.145 1.715-1.95a1.985 1.985 0 0 0-.278-1.719c-.06-.082-.128-.157-.191-.237l-.237-.26c-.306-.358-.611-.736-.851-1.171-.232-.435-.412-.934-.404-1.452-.005-.518.177-1.011.437-1.419.263-.411.617-.735.983-1.023ZM123.249 77.57c-.312.404-.568.873-.518 1.339.048.463.356.865.686 1.237l.125.143c.044.056.09.11.131.169a1.304 1.304 0 0 1 .129 1.233c-.22.527-.712.85-1.202.988.445-.255.82-.628.961-1.074a1.108 1.108 0 0 0-.152-.967c-.034-.046-.072-.088-.107-.132l-.131-.144a3.948 3.948 0 0 1-.47-.646c-.128-.238-.227-.512-.224-.795a1.445 1.445 0 0 1 .236-.78c.146-.226.336-.41.536-.571Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M81.44 73.316h16.04v-5.712H81.44v5.712Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M112.063 96.19H66.857l1.491-15.342a10.45 10.45 0 0 1 10.404-9.436h21.416a10.45 10.45 0 0 1 10.403 9.436l1.492 15.342Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"M70.543 96.157h43.929v-.68h-43.93v.68Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"m72.252 92.11-1.007 3.368h21.262v-1.684s-7.61-2.467-20.255-1.684ZM112.762 92.11l1.007 3.368H92.507v-1.684s7.61-2.467 20.255-1.684Z",clipRule:"evenodd"}),l().createElement("path",{stroke:"#D3E0ED",strokeWidth:".368",d:"M92.507 93.794v1.684"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"M99.775 69.924h-20.63a5.265 5.265 0 0 1-5.267-5.264v-1.992a5.265 5.265 0 0 1 5.267-5.264h20.63a5.265 5.265 0 0 1 5.267 5.264v1.992a5.265 5.265 0 0 1-5.267 5.264Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"M111.419 95.41a.666.666 0 0 1 .648-.681l.578-.015.035 1.328-.579.015a.665.665 0 0 1-.682-.647Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#ABBEDB",fillRule:"evenodd",d:"m112.685 96.225-.045-1.695 6.832-.179.044 1.695-6.831.18ZM119.521 96.231l-.054-2.072 4.69-.123.054 2.072-4.69.123Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"m124.211 96.108-.054-2.072 1.283.374.033 1.258-1.262.44Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#D3E0ED",fillRule:"evenodd",d:"m112.646 94.713.034 1.329-.407.01-.034-1.328.407-.01Z",clipRule:"evenodd"}),l().createElement("path",{fill:"#BDCDE5",fillRule:"evenodd",d:"m125.44 94.41.033 1.258 1.768-.672-1.801-.586Z",clipRule:"evenodd"}))},E=function(e){var t=e.defaultVideo,n=e.title,l=e.description,v=e.duration,g=e.show,Z=e.onClose,x=e.closeAfterEdit,b=e.shouldPublish,B=void 0!==b&&b,y=e.isProduce,C=(0,a.useDispatch)(),k=t.id,w=(0,p.cF)(k).answer,E=(void 0===w?{}:w).totalCount,z=void 0===E?0:E,T=(0,p.oL)(),N=!!T,U=(0,p.fh)(k),R=!N&&U.length===z,A=(0,r.useRef)(),M=(0,i._)((0,r.useState)(null),2),F=M[0],L=M[1],I=(0,i._)((0,r.useState)(""),2),V=I[0],P=I[1],D=(0,r.useCallback)(function(){L(null),P(""),C((0,p.O)(null))},[C]),X=_({selectedQuestion:F,answerContent:V,onClose:Z,shouldPublish:B,setSelectedQuestion:L,selectedContribution:T,zvideoId:k,isEditing:N,duration:v,editorRef:A,closeAfterEdit:void 0!==x&&x,reset:D,MIN_RANGE:6e4}),G=X.onCancel,H=X.onComplete,K=X.onSelectQuestion,W=X.onSubmit,O=X.onCancelEdit;return(0,r.useEffect)(function(){if(g){if(T){var e,t=T.target.parentObject,n=T.content,i=T.startTime,o=T.endTime;L(t),P(n),null===(e=A.current)||void 0===e||e.changeRange(i,o)}else D()}},[g,T,C,D]),(0,o.tZ)(s.Z,{maskClosable:!1,onClose:G,css:{width:"790px",maxHeight:"initial",".Modal-content":{lineHeight:"normal",padding:0,margin:0}},children:g&&(0,o.tZ)(d.eV,{block:"Modal",children:(0,o.BX)(d.Wi,{zaType:"Block",as:c.Flex,height:"600px",children:[(0,o.BX)(c.Flex,{flexDirection:"column",width:"216px",height:"100%",css:function(e){return{backgroundColor:"".concat(e.colors.GBK10A)}},children:[(0,o.BX)(c.Box,{as:"p",fontSize:"24px",fontFamily:"PingFang SC",fontWeight:"500",px:"10px",mt:"24px",mb:"4px",children:["已添加投稿 ",null==U?void 0:U.length,"/",z]}),(0,o.tZ)(c.Box,{flex:"1",overflowY:"auto",px:"20px",mt:"12px",paddingTop:"8px",children:U.length?(0,o.tZ)(h.Z,{isProduce:void 0!==y&&y,zvideoId:k,showSelect:!0}):(0,o.BX)(c.Flex,{justifyContent:"center",alignItems:"center",flexDirection:"column",height:"100%",children:[(0,o.tZ)(S,{}),(0,o.tZ)(c.Text,{fontSize:"17px",fontFamily:"PingFang SC",fontWeight:"500",mt:"46px",css:function(e){return{color:e.colors.GBK02A}},children:"选择相关问题投稿"}),(0,o.tZ)(c.Text,{fontSize:"14px",fontFamily:"PingFang SC",fontWeight:"400",css:function(e){return{color:e.colors.GBK06A}},mt:"4px",children:"让更多人看到你的视频"})]})}),!F&&B&&(0,o.tZ)(c.Flex,{alignItems:"center",justifyContent:"space-between",px:"20px",height:"82px",css:{button:{width:"162px"}},children:(0,o.tZ)(d.$U,{zaType:"Button",zaAction:"Save",zaText:!0,as:u.ZP,onClick:H,preset:"primary",color:"blue",disabled:!U.length,children:"发布"})})]}),(0,o.tZ)(c.Flex,{flexDirection:"column",flex:"1",children:R?(0,o.BX)(o.HY,{children:[(0,o.tZ)(c.Box,{px:"20px",my:"24px",fontSize:"24px",fontWeight:"500",children:"选择投稿问题"}),(0,o.BX)(c.Flex,{flexDirection:"column",justifyContent:"center",alignItems:"center",flex:"1",children:[(0,o.tZ)(c.Image,{width:"160px",height:"160px",src:"https://pic3.zhimg.com/v2-aee0d50112db6c845a1b7e7bcd2d7a84.png"}),(0,o.tZ)(c.Box,{mt:"10px",fontWeight:"500",fontSize:"17px",children:"已达到投稿数量上限"}),(0,o.tZ)(c.Box,{mt:"4px",fontSize:"14px",color:"GBK06A",children:"可移除已添加投稿来继续投稿问题"})]})]}):F?(0,o.tZ)(f.Z,{value:V,onChange:P,onSubmit:W,onCancel:O,isEditing:N,selectedQuestion:F}):(0,o.tZ)(m.Z,{zvideoId:k,title:n,description:l,onSelect:K})})]})})})}},57508:function(e,t,n){n.d(t,{o:function(){return s},Z:function(){return u}});var i=n(15030),o=n(55164),r=n(94009),l=n(85879),a=n(65733),c=n(87363),d=n(81956),s=(0,c.createContext)({}),u=function(e){var t=e.children,n=e.zvideo_id,u=e.defaultVideo,p=(0,r._)((0,c.useState)(null),2),h=p[0],f=p[1],m=(0,d.Z)(),v=(0,a.Z)(function(e){m&&n&&m("/api/v4/zvideos/".concat(n,"/publish/permissions?full_duration_millis=").concat(e)).then(function(e){if(e.ok){var t=e.payload,n=(null!=t?t:{}).chapters;n&&f((0,o._)({},n,{minInterval:"number"==typeof n.minInterval?parseInt("".concat(n.minInterval/1e3)):5}))}})}),g=(0,c.useRef)();return(0,c.useEffect)(function(){if(n&&void 0===g.current){var e,t;u.file&&(0,i._)(u.file,File)?(e=u.file,new Promise(function(t,n){try{var i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=function(){URL.revokeObjectURL(i.src),t(Math.floor(1e3*i.duration))},i.onerror=n,i.src=URL.createObjectURL(e)}catch(e){n(e)}})).then(function(e){g.current=e,v(e)}):(null===(t=u.video)||void 0===t?void 0:t.duration)&&v(1e3*u.video.duration)}},[u,n,m,v]),(0,l.tZ)(s.Provider,{value:h,children:h&&t})}},72839:function(e,t,n){n.d(t,{Z:function(){return eE}});var i=n(55164),o=n(57477),r=n(94009),l=n(49899),a=n(85879),c=n(95939),d=n(8586),s=n(7835),u=n(36892),p=n(29229),h=n(65733),f=n(75056),m=n(53910),v=n(25628),g=n.n(v),Z=n(14914),x=n(76931),b=n.n(x),B=n(88329),y=n.n(B),C=n(87363),_=n.n(C),k=n(53778),w=n(69383),S=n(43384),E=n(47970),z=n(99447),T=n(87641),N=n(47842),U=n(38889),R=n(66980),A=Object.assign,M=function(e){return _().createElement(R.Z,A({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),_().createElement("path",{fill:"#06F",fillRule:"evenodd",d:"M0 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V2Zm5.136 6.608.214.214 4.276-4.277-.707-.707-3.574 3.574-2.138-2.138-.707.707 2.632 2.632.004-.005Z",clipRule:"evenodd"}))},F=Object.assign,L=function(e){return _().createElement(R.Z,F({width:"12",height:"12",fill:"none",viewBox:"0 0 12 12"},e),_().createElement("rect",{width:"10",height:"10",x:"1",y:"1",stroke:"#D3D3D3",strokeWidth:"2",rx:"1.5"}))},I=function(e){var t=e.handleCancel,n=e.handleAgree,i=(0,r._)((0,C.useState)(!1),2),o=i[0],l=i[1];return(0,a.BX)(N.Z,{title:"联合创作协议",closeButton:null,color:"GBK02A",children:[(0,a.tZ)(T.Box,{mb:"24px",children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),(0,a.BX)(T.Flex,{fontSize:"14px",lineHeight:"24px",alignItems:"center",children:[o?(0,a.tZ)(M,{css:{paddingRight:"11px"},onClick:function(){return l(!1)}}):(0,a.tZ)(L,{css:{paddingRight:"11px"},onClick:function(){return l(!0)}}),"我已充分阅读并同意",(0,a.tZ)(T.Text,{display:"inline-block",color:"GBL01A",css:{cursor:"pointer"},onClick:function(){return window.open("/term/coopcreation","_blank")},children:"《联合创作用户协议》"})]}),(0,a.BX)(N.w,{direction:"horizontal",children:[(0,a.tZ)(U.ZP,{onClick:t,children:"取消"}),(0,a.tZ)(U.ZP,{preset:"primary",color:"blue",onClick:n,disabled:!o,children:"同意"})]})]})},V=n(39373),P=n(76435),D=n(95377),X=n(45001),G=function(e){var t=e.handleConfirm;return(0,a.BX)(N.Z,{title:"什么是「联合创作」",closeButton:null,children:[(0,a.tZ)("div",{children:"知乎鼓励视频作者引用图文作者的优质图文内容进行视频联合创作。视频审核成功后，平台会以私信的方式告知图文作者。若图文作者同意升级为联合创作，引用关系会变为联合创作关系。在原图文内容下会展示联合创作的视频，同时图文作者会在他的个人主页下发布视频。"}),(0,a.tZ)(N.w,{direction:"horizontal",children:(0,a.tZ)(U.ZP,{preset:"primary",color:"blue",onClick:t,children:"我知道了"})})]})},H=n(30016),K=n(67927),W=n(41492),O=n(99178),j=n(80565),q=n(49274),Q=n(66263),$=function(e){var t=e.handleSelect,n=(0,k.useSelector)(function(e){return e.zvideos.collectData}),o=n.list,r=void 0===o?[]:o,l=n.isFetching,c=n.isEnd,d=n.next,s=(0,k.useDispatch)();return(0,C.useEffect)(function(){s((0,W.B$)())},[s]),(0,a.tZ)(a.HY,{children:l||r.length>0?(0,a.BX)(O.ZP,{onLoad:function(){s((0,W.B$)(d))},isLoading:l,isDrained:void 0!==c&&c,css:{flex:"1",overflow:"auto",marginTop:"68px"},getContainer:function(e){return e},placeholder:(0,a.tZ)(O.i,{className:"List-item"}),children:[(0,a.tZ)(T.Text,{lineHeight:"25px",mb:"8px",px:"24px",color:"#1A1A1A",children:"以下为可引用的内容"}),r.map(function(e,n){var o=e.target,r=o.type,l=o.id,c=o.author,d=c.avatarUrl,s=c.name,u=c.description,p=o.title,h=o.question,f=(void 0===h?{}:h).title,m=o.excerpt;return(0,a.tZ)(S.eV,{content:{token:String(l),type:Q.LA[r]},children:(0,a.BX)(S.$U,{view:{elementLocation:{card:{index:n}}},shouldTrackShow:!0,zaType:"Card",as:T.Box,onClick:function(){return t({type:r,id:l})},css:{borderRadius:"6px",padding:"8px 24px",boxShadow:"inset 0px -0.5px 0px #EBEBEB","&:hover":{background:"rgba(0, 102, 255, 0.08)",cursor:"pointer"}},children:[(0,a.BX)(T.Flex,{fontSize:"14px",pb:"7px",alignItems:"center",children:[(0,a.tZ)(T.Image,{src:d,sx:{borderRadius:2},height:18,width:18,mr:"8px"}),(0,a.tZ)(T.Text,{color:"GBK03A",fontWeight:"600",children:s}),u&&(0,a.tZ)(T.Text,{color:"GBK04A",fontWeight:"600",children:"，"}),(0,a.tZ)(T.Text,{color:"GBK04A",css:(0,i._)({flex:1},(0,j.S)(1)),children:u})]}),(0,a.tZ)(T.Text,{color:"GBK02A",fontWeight:"600",fontSize:"15px",children:"article"===r?p:f}),(0,a.tZ)(T.Text,{fontSize:"14px",lineHeight:"25px",color:"#1A1A1A",children:m})]})},n)})]}):(0,a.tZ)(q.H.EI1,{image:"noCollection",content:"你还没有收藏可引用的内容"})})},Y=n(80714),J=Object.assign,ee=function(e){return _().createElement(R.Z,J({width:"16",height:"16",fill:"none",viewBox:"0 0 16 16"},e),_().createElement("path",{fill:"#121212",fillRule:"evenodd",d:"M2.333 2.667a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8a1 1 0 0 1 0 2h-8a1 1 0 0 1-1-1Zm-3.334-4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334-7a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Z",clipRule:"evenodd"}),_().createElement("mask",{id:"id-801532647-a",width:"14",height:"11",x:"1",y:"2",maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},_().createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M2.333 2.667a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334 5a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Zm0 4a1 1 0 0 1 1-1h8a1 1 0 0 1 0 2h-8a1 1 0 0 1-1-1Zm-3.334-4a1 1 0 1 1 2 0 1 1 0 0 1-2 0Zm1 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Zm2.334-7a1 1 0 0 1 1-1h8a1 1 0 1 1 0 2h-8a1 1 0 0 1-1-1Z",clipRule:"evenodd"})),_().createElement("g",{mask:"url(#id-801532647-a)"},_().createElement("path",{fill:"#8590A6",d:"M0 0h16v16H0z"})))},et="https://".concat(Y.Z.wwwHost,"/image-text-cite?").concat(new URLSearchParams({source:"upload-video"})),en=function(e){var t=e.handleCancel,n=e.handleConfirm,i=e.handleChange,o=e.link;return(0,a.BX)(T.Box,{px:"24px",mt:"68px",children:[(0,a.tZ)(D.Z,{multiline:!0,placeholder:"粘贴你想引用的内容链接",rows:7,css:{height:"180px !important",width:"100%",margin:"12px 0",paddingTop:"12px"},onChange:i,value:o}),(0,a.BX)(S.$U,{extra:{link:{url:et}},zaAction:"OpenUrl",zaText:"cite_image_text_go_list",zaType:"Button",as:U.ZP,preset:"plain",onClick:function(){return window.open(et,"_blank")},children:[(0,a.tZ)(ee,{css:{marginRight:"8px",verticalAlign:"middle"}}),"可视化图文内容库"]}),(0,a.BX)(N.w,{direction:"horizontal",children:[(0,a.tZ)(U.ZP,{onClick:t,children:"取消"}),(0,a.tZ)(S.$U,{zaText:"cite_image_text_stick_click",zaType:"Button",as:U.ZP,preset:"primary",color:"blue",onClick:function(){return n(o)},disabled:!o,children:"确认"})]})]})},ei=[{title:"粘贴链接",key:"sticky"},{title:"我的收藏夹",key:"collect"}],eo=function(e){var t=e.handleCancel,n=e.handleSelect,i=(0,r._)((0,C.useState)("sticky"),2),o=i[0],l=i[1],c=(0,r._)((0,C.useState)(""),2),d=c[0],s=c[1],u=(0,h.Z)(function(e){s(e.target.value)}),p=(0,k.useDispatch)(),f=(0,h.Z)(function(e){"sticky"===o?p((0,W.P6)(e)).then(function(e){var t=e.payload,n=t.canReference,i=t.contentType,o=t.contentId;return n?p((0,W.XT)({type:i,id:o})):Promise.reject()}).then(function(e){n(e.payload)}).catch(function(){p((0,K.c0)("此内容不可引用","red"))}):"collect"===o&&p((0,W.XT)(e)).then(function(e){n(e.payload)})});return(0,a.tZ)(N.Z,{closeButton:null,css:{height:"416px",width:"536px"},size:"fullPage",children:(0,a.BX)(T.Box,{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",children:["sticky"===o&&(0,a.tZ)(en,{link:d,handleChange:u,handleCancel:t,handleConfirm:f}),"collect"===o&&(0,a.tZ)($,{handleSelect:f}),(0,a.tZ)(H.Z,{css:{display:"flex",justifyContent:"center",borderBottom:"0",paddingTop:"10px",position:"absolute",width:"100%"},children:ei.map(function(e){var t=e.title,n=e.key;return(0,a.tZ)(H.O,{onClick:function(){return l(n)},children:(0,a.tZ)(T.Box,{css:function(e){return{color:o===n?e.colors.GBK02A:e.colors.GBL05A,fontWeight:600,fontSize:"15px",lineHeight:"30px",position:"relative","&:hover":{cursor:"pointer"},"&::after":o===n?{content:"''",position:"absolute",top:"46px",left:"50%",transform:"translateX(-50%)",height:"4px",width:"36px",background:e.colors.GBL01A,borderRadius:"29px"}:{}}},children:t})},n)})})]})})},er=n(4627),el=n(94057),ea=n(26921),ec=n(89774),ed=n(21220),es=[{value:"original",label:"原创"},{value:"reprint",label:"转载"}],eu="https://pic2.zhimg.com/v2-feb96045745dac939aa2a900c6d6845d.jpg",ep=[{name:"answer",id:1},{name:"article",id:2}],eh=n(15030),ef=n(83537),em=n(4773),ev=n(77100),eg=n(25076),eZ=n(89897);function ex(e){var t=e.content;return(0,a.tZ)(T.Box,{css:function(e){return{backgroundColor:e.colors.GBL01A,borderRadius:"4px",fontSize:"12px",lineHeight:"14px",color:e.colors.GBK99B,padding:"8px 12px",position:"absolute",left:0,top:"-33px","::after":{content:'""',display:"block",width:"6px",height:"6px",background:e.colors.GBL01A,position:"absolute",left:"25px",bottom:"-3px",transform:"rotate(45deg)"}}},children:t})}var eb=function(e){var t=e.defaultVideo,i=e.title,o=e.description,l=e.active,c=t.id,d=(0,k.useDispatch)(),s=(0,r._)((0,C.useState)(0),2),u=s[0],h=s[1],f=(0,r._)((0,eg.Z)("zvideo_contribution_form:should_hide_tooltip"),2),m=f[0],v=f[1],g=(0,r._)((0,C.useState)(!1),2),Z=g[0],x=g[1],b=(0,r._)((0,C.useState)(!1),2),B=b[0],y=b[1],_=(0,em.cF)(c).answer,w=(void 0===_?{}:_).canContribute,E=void 0!==w&&w,z=(0,em.fh)(c),T=((0,p.Z)(function(){return Promise.all([n.e(8091),n.e(6765)]).then(n.bind(n,59908))}),(0,C.useCallback)(function(){i?(d((0,em.O)(null)),x(!0),y(!1)):d((0,K.c0)("输入标题后才可以投稿哦"))},[i,d])),N=(0,C.useCallback)(function(){x(!0),y(!0)},[]);return((0,C.useEffect)(function(){d((0,em.ub)(c,"edit"))},[d,c]),(0,C.useEffect)(function(){var e,n;t.file&&(0,eh._)(t.file,File)?(e=t.file,new Promise(function(t,n){try{var i=document.createElement("video");i.preload="metadata",i.onloadedmetadata=function(){URL.revokeObjectURL(i.src),t(Math.floor(1e3*i.duration))},i.onerror=n,i.src=URL.createObjectURL(e)}catch(e){n(e)}})).then(function(e){d((0,em.Xg)({zvideoId:c,duration:e})),h(e)}):((null===(n=t.video)||void 0===n?void 0:n.duration)&&h(parseInt(1e3*t.video.duration)),d((0,em.Xg)({zvideoId:c})))},[t,d,c]),(0,ef.Z)(function(){return v(!0)},!m&&E&&l?5e3:null),E||z.length)?(0,a.BX)(S.eV,{block:"Contribution",children:[(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)(S.Wi,{zaType:"Block",className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--top",children:"投稿问题"}),l&&!m&&(0,a.tZ)(ex,{content:"投稿到问题，让更多人看到你的视频"}),(0,a.tZ)("div",{children:(0,a.tZ)(ev.Z,{zvideoId:c,showCreateButton:!0,onAdd:T,onSelect:N})})]}),(0,a.tZ)(eZ.Z,{show:Z,defaultVideo:t,title:i,description:o,duration:u,closeAfterEdit:B,onClose:function(){return x(!1)},isProduce:!0})]}):null};function eB(e){var t=new URLSearchParams(location.search);return e&&"longer"===t.get("mode")?80:40}var ey=function(e){var t=e.citeId,n=e.citeType;return{reference:{referenceType:n&&ep.find(function(e){return e.name===n}).id||0,referenceContentToken:t?String(t):"0"}}},eC=n(57508),e_=n(2930),ek=n(79446),ew=function(e){var t=e.title;return t&&(0,a.tZ)(T.Text,{sx:{lineHeight:"15px",fontSize:"15px",fontWeight:"bold",color:"GBK02A",marginBottom:"16px"},children:t})},eS=function(e){var t=e.title,n=e.description,o=e.imageUrl,r=e.duration,l=(0,ek.Z)(["avatarUrl","name"]),c=l.avatarUrl,d=l.name;return(0,a.BX)(T.Box,{width:"278px",pl:"20px",sx:{position:"absolute",right:0,top:"26px",borderLeft:"1px solid",borderColor:"GBK09A",overflow:"auto"},children:[(0,a.tZ)(ew,{title:"移动端预览效果"}),(0,a.BX)(T.Box,{width:"236px",height:"494px",sx:{backgroundImage:'url("https://pic3.zhimg.com/v2-6b6281a5e31bfc1385d8d4462f31ea5c.png")',backgroundSize:"100% 100%",fontSize:"12px",position:"relative",marginTop:"26px"},children:[(0,a.BX)(T.Box,{width:"222px",height:"281px",bg:"GBK99A",sx:{position:"absolute",left:"7px",top:"158px",overflow:"hidden"},children:[(0,a.BX)(T.Flex,{pt:"4px",mx:"9px",alignItems:"center",bg:"GBK99A",children:[(0,a.tZ)(T.Box,{width:"19px",height:"19px",mr:"9px",bg:"GBK10A",sx:{borderRadius:"50%",overflow:"hidden"},children:c&&(0,a.tZ)(T.Image,{src:c,width:"100%",height:"100%"})}),(0,a.BX)(T.Box,{children:[(0,a.tZ)(T.Text,{width:d?"150%":"24px",height:"9px",bg:d?"transparent":"GBK10A",mb:d?"2px":"0px",sx:{borderRadius:"4px",color:"GBK02A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.67)"},children:d}),(0,a.tZ)(T.Text,{width:c?"170%":"113px",height:"9px",bg:c?"transparent":"GBK10A",sx:{borderRadius:"4px",color:"GBK06A",lineHeight:"9px",transformOrigin:"0 center",transform:"scale(0.58)"},children:c&&"1 分钟前・发布了视频"})]})]}),(0,a.tZ)(T.Box,{width:t?"auto":"175px",height:t?"auto":"13px",bg:t?"transparent":"GBK10A",m:"4px 9px",sx:(0,i._)({borderRadius:"4px",fontWeight:"bold",zoom:t?.83:1},(0,j.S)(2)),children:t}),(0,a.tZ)(T.Box,{m:"0 9px 5px",sx:(0,i._)({color:"GBK03A",zoom:n?.67:1},(0,j.S)(3)),children:n||(0,a.BX)(a.HY,{children:[(0,a.tZ)(T.Text,{width:"199px",height:"9px",mb:"3px",bg:"GBK10A",sx:{borderRadius:"4px"}}),(0,a.tZ)(T.Text,{width:"74px",height:"9px",bg:"GBK10A",sx:{borderRadius:"4px"}})]})}),(0,a.BX)(T.Box,{height:"115px",bg:o?"GBK02B":"GBK10A",mx:"9px",sx:{borderRadius:"4px",overflow:"hidden",position:"relative"},children:[o&&(0,a.tZ)(T.Image,{src:o,width:"100%",height:"100%",sx:{objectFit:"cover"}}),(0,a.tZ)(e_.o,{css:{width:"34px",height:"34px",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),(0,a.tZ)(T.Text,{width:r?"auto":"23px",bg:r?"transparent":"GBK09B",height:r?"auto":"6px",sx:{position:"absolute",bottom:"7px",right:"7px",zoom:r?.58:1,color:"GBK99A",borderRadius:"4px"},children:r})]}),(0,a.tZ)(T.Image,{src:"https://pic1.zhimg.com/v2-add740deb6bfded14b013d4b115aef7f.png",width:"100%"}),(0,a.tZ)(T.Image,{src:"https://pic3.zhimg.com/v2-c98b0c106781ed7b3e12c03c6c5b3c86.png",width:"100%"})]}),(0,a.tZ)(T.Box,{width:"222px",height:"56px",sx:{position:"absolute",left:"7px",bottom:"6px",backgroundImage:'url("https://pic2.zhimg.com/v2-c80434267f8c3e22ca3b5cd109e4b5d4.png")',backgroundSize:"100% 100%"}})]})]})},eE=(0,ea.ZP)({init:!0,getScene:function(){return{type:"zvideo"}}})(function(e){var t,v,x,B,_,T,N,R,A,M,F,L,H,O,j,q,$,Y,J,ee=e.className,et=e.defaultVideo,en=e.status,ei=e.checkFormValid,ea=e.onRemove,eh=e.onSubmit,ef=e.shouldShowScheduledPublish,em=e.active,ev=e.citeType,eg=e.citeId,eZ=e.showMobilePreview,ex=void 0!==eZ&&eZ,e_=e.writeShield,ek=(0,ec.Z)();(0,s.Z)(function(){var e;null==e_||null===(e=e_.setOnModalClose)||void 0===e||e.call(e_,function(){if(ex){location.href="https://www.zhihu.com";return}null==ea||ea()})});var ew=(0,r._)((0,C.useState)((0,ed.hX)(null==et?void 0:et.id)||(null==et?void 0:null===(v=et.chapters)||void 0===v?void 0:v.map(function(e){return(0,o._)((0,i._)({},e),{start_time:e.startTime})}))||[]),2),eE=ew[0],ez=ew[1],eT=(0,r._)((0,C.useState)(null),2),eN=eT[0],eU=eT[1],eR=(0,r._)((0,C.useState)(!1),2),eA=eR[0],eM=eR[1],eF=(0,r._)((0,C.useState)(!1),2),eL=eF[0],eI=eF[1],eV=(t=null==et?void 0:null===(x=et.reference)||void 0===x?void 0:x.referenceType)?ep.find(function(e){return e.id===t}).name:null,eP=(0,r._)((0,C.useState)({citeType:eV||ev||null,citeId:(null==et?void 0:null===(B=et.reference)||void 0===B?void 0:B.referenceContentToken)||eg||null}),2),eD=eP[0],eX=eP[1],eG=(0,r._)((0,C.useState)(!1),2),eH=eG[0],eK=eG[1],eW=(0,r._)((0,C.useState)(!1),2),eO=eW[0],ej=eW[1],eq=(0,r._)((0,C.useState)(!1),2),eQ=eq[0],e$=eq[1],eY=Z.Z(new Date,30),eJ=(0,r._)((0,C.useState)(!1),2),e0=eJ[0],e1=eJ[1],e2=(0,r._)((0,C.useState)(eY),2),e3=e2[0],e4=e2[1],e7=(0,k.useSelector)(function(e){return e.zvideos.tagoreCategory},k.shallowEqual),e8=(0,r._)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=(0,k.useDispatch)(),i=Array.isArray(e),o=i?e:[e];return(0,C.useMemo)(function(){return i?o.map(function(e){return(0,el.bindActionCreators)(e,n)}):(0,el.bindActionCreators)(o[0],n)},[n].concat((0,l._)(o),(0,l._)(t)))}([W.eJ,W.XD,W.DQ,W.Es,W.SM,K.c0,W.XT,W.b_,W.My,W.l0]),10),e5=e8[0],e6=e8[1],e9=e8[2],te=e8[3],tt=e8[4],tn=e8[5],ti=e8[6],to=e8[7],tr=e8[8],tl=e8[9],ta=(0,k.useSelector)(function(e){return e.zvideos.videoSource}),tc=(0,r._)((0,C.useState)((null==et?void 0:et.title)||""),2),td=tc[0],ts=tc[1],tu=(0,r._)((0,C.useState)(null!==(q=null==et?void 0:et.description)&&void 0!==q?q:""),2),tp=tu[0],th=tu[1],tf=(0,r._)((0,C.useState)(null!==($=null==et?void 0:null===(_=et.category)||void 0===_?void 0:null===(T=_.firstLevel)||void 0===T?void 0:T.id)&&void 0!==$&&$),2),tm=tf[0],tv=tf[1],tg=e7.find(function(e){return e.data.id===tm}),tZ=(0,r._)((0,C.useState)(null!==(Y=null==et?void 0:null===(N=et.category)||void 0===N?void 0:null===(R=N.secondLevel)||void 0===R?void 0:R.id)&&void 0!==Y&&Y),2),tx=tZ[0],tb=tZ[1];(0,C.useEffect)(function(){to().then(function(e){var t=e.payload.canRef,n=void 0!==t&&t;return(eM(n),n)?tr():(eX({citeId:null,citeType:null}),Promise.reject())}).then(function(e){eI(e.payload.agreeState)}).catch(y())},[]);var tB=function(e){var t=e.author,n=t.avatarUrl,i=t.name,o=e.type,r={headPhoto:n,name:i};if("article"===o){var l=e.imageUrl,a=e.title;r.contentPhoto=l,r.title=a}if("answer"===o){var c=e.question.title,d=e.thumbnailInfo,s=b()(void 0===d?{}:d,"thumbnails[0].url",null);s&&(r.contentPhoto=s),r.title=c}return r};(0,C.useEffect)(function(){var e=eD.citeId,t=eD.citeType;e&&t&&ti({type:t,id:e}).then(function(e){eU(tB(e.payload||{}))})},[]),(0,C.useEffect)(function(){e7.length||e9()},[e7,e9]);var ty=(0,r._)((0,C.useState)(!!(null==et?void 0:null===(A=et.category)||void 0===A?void 0:null===(M=A.firstLevel)||void 0===M?void 0:M.id)||!!(null==et?void 0:null===(F=et.category)||void 0===F?void 0:null===(L=F.secondLevel)||void 0===L?void 0:L.id)),2),tC=ty[0],t_=ty[1],tk=(0,u.Z)(function(e){te(e).then(function(e){var t=e.payload.data[0];t&&(tv(t.firstLevel.id),tb(t.secondLevel.id))})},300);(0,C.useEffect)(function(){tC||tk({title:td,type:"zvideo",content:tp})},[td,tp,tC,tk]);var tw=(0,r._)((0,C.useState)(null!==(J=null==et?void 0:et.topics)&&void 0!==J?J:[]),2),tS=tw[0],tE=tw[1],tz=(0,r._)((0,C.useState)(!!(null==et?void 0:null===(H=et.topics)||void 0===H?void 0:H.length)),2),tT=tz[0],tN=tz[1],tU=(0,r._)((0,C.useState)(!1),2),tR=tU[0],tA=tU[1],tM=(0,u.Z)(function(e){tt(e).then(function(e){var t=e.payload.data;t.length&&tE(t)})},300);(0,C.useEffect)(function(){!tT&&tm&&tx&&tM({type:"zvideo",text:td,firstLevelCategoryId:tm,secondLevelCategoryId:tx,limit:6})},[td,tm,tx,tT,tM]);var tF=(0,r._)((0,C.useState)(!1),2),tL=tF[0],tI=tF[1],tV=(0,r._)((0,C.useState)(null==et?void 0:et.imageUrl),2),tP=tV[0],tD=tV[1],tX=(0,r._)((0,C.useState)(null==et?void 0:et.imageUrlFrom),2),tG=tX[0],tH=tX[1],tK=(0,C.useCallback)(function(e,t){tD(e),tI(!0),tH(t)},[tD]);(0,C.useEffect)(function(){!tP&&(null==et?void 0:et.imageUrl)?tD(et.imageUrl):tP===eu&&(null==et?void 0:et.imageUrl)&&et.imageUrl!==eu&&tD(et.imageUrl)},[tP,et]);var tW=(0,p.Z)(function(){return n.e(1951).then(n.bind(n,50316))}),tO=(0,r._)((0,C.useState)(null==et?void 0:et.zvideoType),2),tj=tO[0],tq=tO[1],tQ=(null==et?void 0:et.zvideoState)==="published";(0,C.useEffect)(function(){if(ta.isLoaded&&et.queryVideoId){if(td||ts(ta.title||""),!tS.length){var e;tE(null!==(e=ta.topics)&&void 0!==e?e:[])}tj||tq(ta.zvideoType)}},[ta,td,tS,tj,et]);var t$=(0,u.Z)(function(e,t){e6(e,t)},300);(0,C.useEffect)(function(){et.id&&t$(et.id,(0,o._)((0,i._)({title:td,description:tp,category:{firstLevel:tm||void 0,secondLevel:tx||void 0},zvideoType:tj,topicIds:tS.map(function(e){return e.id||e.urlToken}),imageUrl:tP,imageUrlFrom:tG||2,isVisible:!0},ey(eD)),{chapters:eE}))},[et.id,td,tp,tm,tx,tj,tS,tP,tG,t$,eD,eE]);var tY=(0,u.Z)(function(e){return e5(e).then(function(e){var t,n,i,o,r,l,a,c,d=e.payload;d&&(td||ts(d.title),!tP&&d.imageUrl&&tD(d.imageUrl),tp||th(null!==(r=d.description)&&void 0!==r?r:""),tm||tv(null!==(l=null===(t=d.category)||void 0===t?void 0:null===(n=t.firstLevel)||void 0===n?void 0:n.id)&&void 0!==l&&l),tx||tb(null!==(a=null===(i=d.category)||void 0===i?void 0:null===(o=i.secondLevel)||void 0===o?void 0:o.id)&&void 0!==a&&a),(null==tS?void 0:tS.length)||tE(null!==(c=d.topics)&&void 0!==c?c:[]),tj||tq(d.zvideoType))})},300);(0,C.useEffect)(function(){et.id&&tY(et.id)},[et,tY]);var tJ=!!et.id,t0=["uploading","uploadError"].includes(en),t1=(0,h.Z)(function(){tl().then(function(e){var t=e.payload.success;void 0!==t&&t&&(ej(!1),e$(!0),eI(!0))})}),t2=(0,h.Z)(function(e){ez((0,l._)(e))}),t3=(0,p.Z)(function(){return Promise.all([n.e(8091),n.e(4055)]).then(n.bind(n,27194))}),t4=eB(ek);return(0,a.tZ)(S.eV,{block:"VideoUploadForm",content:{type:"Zvideo",id:et.id},children:(0,a.BX)(S.Wi,{zaType:"Block",className:g()("VideoUploadForm",ee),children:[(0,a.BX)("div",{className:"VideoUploadForm-content",children:[(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topBelow",children:"封面"}),(0,a.BX)("div",{className:"VideoUploadForm-imageContainer",children:[!t0&&(0,a.tZ)("img",{className:"VideoUploadForm-image",src:tP||eu,alt:""}),t0&&(0,a.tZ)("div",{className:"VideoUploadForm-uploadStatus",children:"uploading"===en?"视频上传中":"视频上传失败"}),(0,a.tZ)("div",{className:"VideoUploadForm-duration",children:(0,E.Z)(null===(O=et.video)||void 0===O?void 0:O.duration)}),(0,a.tZ)(P.SV,{children:tW&&(0,a.tZ)(tW,{defaultVideo:et,coverChanged:tL,imageUrl:tP,onVideoPosterChange:tK})})]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"标题"}),(0,a.tZ)(D.Z,{className:"VideoUploadForm-input",value:td,onChange:function(e){ts(e.target.value)},placeholder:"输入视频标题",large:!0,after:(0,a.tZ)("div",{className:"VideoUploadForm-itemLimit",children:"".concat(td.length,"/").concat(t4)})}),td.length<5&&(0,a.BX)("div",{className:"VideoUploadForm-itemError",children:["最少输入 ",5," 个字"]}),td.length>t4&&(0,a.BX)("div",{className:"VideoUploadForm-itemError",children:["已超出 ",td.length-t4," 个字"]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--topBelow",children:"简介"}),(0,a.tZ)(D.Z,{className:"VideoUploadForm-input VideoUploadForm-input--multiline",value:tp,onChange:function(e){th(e.target.value)},placeholder:"填写视频简介，让更多人找到你的视频",multiline:!0,large:!0,rows:4,after:(0,a.tZ)("div",{className:"VideoUploadForm-itemLimit VideoUploadForm-itemLimit--multiline",children:"".concat(tp.length,"/").concat(300)})}),tp.length>300&&(0,a.BX)("div",{className:"VideoUploadForm-itemError VideoUploadForm-itemError--multiline",children:["已超出 ",tp.length-300," 个字"]})]}),tJ&&(0,a.tZ)(eb,{defaultVideo:et,title:td,description:tp,active:em}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"所属领域"}),(0,a.BX)("div",{className:"VideoUploadForm-selectContainer",children:[(0,a.BX)(X.Z,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:tm,onChange:function(e){tv(e),tb(!1),t_(!0)},children:[!tg&&(0,a.tZ)(X.W,{value:!1,text:"选择领域"},"all"),e7.map(function(e){var t=e.data;return(0,a.tZ)(X.W,{value:t.id,text:t.name},t.id)})]}),tg&&(0,a.BX)(X.Z,{className:"VideoUploadForm-select",listClassName:"VideoUploadForm-selectList",value:tx,onChange:function(e){tb(e),t_(!0)},children:[(0,a.tZ)(X.W,{value:!1,text:"选择领域"},"all"),tg.children.map(function(e){var t=e.data;return(0,a.tZ)(X.W,{value:t.id,text:t.name},t.id)})]})]})]}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required VideoUploadForm-itemTitle--topic",children:"绑定话题"}),(0,a.tZ)(er.Z,{className:"VideoUploadForm-topicInput",value:tS,onChange:function(e){tE(e),tN(!0)},max:6,actived:tR,onToggleActived:function(){return tA(!tR)}})]}),(0,a.tZ)(eC.Z,{zvideo_id:et.id,defaultVideo:et,children:(0,a.tZ)(eC.o.Consumer,{children:function(e){return e.canUse&&t3&&(0,a.tZ)(t3,{onSubmit:t2,knowledges:eE,defaultVideo:et})}})}),(0,a.BX)("div",{className:"VideoUploadForm-item",children:[(0,a.tZ)("div",{className:"VideoUploadForm-itemTitle VideoUploadForm-itemTitle--required",children:"视频类型"}),(0,a.BX)("div",{className:"VideoUploadForm-typeContainer",children:[(0,a.tZ)("div",{className:g()("VideoUploadForm-radioContainer",{"VideoUploadForm-radioContainer--disabled":tQ}),children:es.map(function(e){return(0,a.BX)("label",{className:"VideoUploadForm-radioLabel",children:[(0,a.tZ)(c.Z,{className:"VideoUploadForm-radio",size:16,checked:e.value===tj,onChange:function(){tq(e.value)},disabled:tQ}),e.label]},e.value)})}),"reprint"===tj&&(0,a.tZ)("div",{className:"VideoUploadForm-typeHint",children:"请确保转载视频符合版权使用规范，如被举报侵权，视频将会被删除"})]})]}),eA&&(0,a.BX)("div",{className:"VideoUploadForm-item",css:{alignItems:"flex-start"},children:[(0,a.BX)("div",{className:"VideoUploadForm-itemTitle",children:[(0,a.tZ)("span",{css:{marginRight:"4px",verticalAlign:"middle"},children:"联合创作"}),(0,a.tZ)(f.rk,{size:16,fill:"#8590A6",css:{verticalAlign:"middle",cursor:"pointer"},onClick:function(){return eK(!0)}})]}),eN?(0,a.tZ)(S.eV,{content:{token:String(eD.citeId),type:Q.LA[eD.citeType]},children:(0,a.BX)(S.Wi,{zaType:"Card",view:{elementLocation:{card:{index:0}}},children:[(0,a.tZ)("div",{css:function(e){return{color:e.colors.GBL05A,fontSize:"14px",lineHeight:"14px",marginBottom:"13px",textAlign:"right"}},children:(0,a.tZ)(U.ZP,{onClick:function(){(null==et?void 0:et.zvideoState)!=="published"?(eU(null),eX({citeId:null,citeType:null})):tn("视频已发布，无法删除引用内容","red")},css:{padding:"0",lineHeight:"1",border:"none"},children:"删除"})}),(0,a.BX)("div",{css:function(e){return{width:"400px",padding:"12px 12px 12px 15px",background:e.colors.GBK10C,borderRadius:"3px",display:"flex",justifyContent:"space-between"}},children:[(0,a.BX)("div",{children:[(0,a.tZ)("div",{css:function(e){return{color:e.colors.GBK03A,fontSize:"14px",lineHeight:"18px",marginBottom:"13px",fontWeight:"500"}},children:eN.title}),(0,a.BX)("div",{children:[(0,a.tZ)("img",{css:{width:"16px",height:"16px",borderRadius:"50%",verticalAlign:"middle",objectFit:"cover"},src:eN.headPhoto,alt:""}),(0,a.tZ)("span",{css:function(e){return{fontSize:"13px",lineHeight:"18px",color:e.colors.GBK03A,marginLeft:"8px",verticalAlign:"middle"}},children:eN.name})]})]}),eN.contentPhoto&&(0,a.tZ)("img",{css:{width:"95px",height:"65px",borderRadius:"5px",objectFit:"cover"},src:eN.contentPhoto,alt:""})]})]})}):(0,a.tZ)(S.$U,{zaText:"cite_image_text_content_click",zaType:"Button",as:U.ZP,onClick:function(){eL?e$(!0):ej(!0)},css:{lineHeight:"30px"},icon:m.nY,preset:"plain",color:"blue",children:"引用图文内容"})]}),ef&&(0,a.BX)("div",{className:"VideoUploadForm-item VideoUploadForm-scheduledPublish",children:[(0,a.tZ)("span",{className:"VideoUploadForm-itemTitle",children:"定时发布"}),(0,a.tZ)(d.Z,{className:"VideoUploadForm-scheduledPublish--switch",checked:e0,onChange:function(e){return e1(e.target.checked)}}),e0&&(0,a.BX)(a.HY,{children:[(0,a.tZ)(V.Z,{className:"VideoUploadForm-scheduledPublish--timePicker",value:e3,min:eY,onChange:function(e){e4(Date.parse(e))}}),(0,a.tZ)(f.rk,{className:"VideoUploadForm-scheduledPublish--tooltip",size:18,"data-tooltip":"时间需至少设置在30分钟以后","aria-label":"时间需至少设置在30分钟以后","data-tooltip-position":"top"})]})]}),eH&&(0,a.tZ)(G,{handleConfirm:function(){eK(!1)}}),eO&&(0,a.tZ)(I,{handleAgree:t1,handleCancel:function(){return ej(!1)}}),eQ&&(0,a.tZ)(eo,{handleCancel:function(){return e$(!1)},handleSelect:function(e){var t=e.id,n=e.type;eU(tB(e)),eX({citeId:t,citeType:void 0===n?"":n}),e$(!1)}})]}),(0,a.BX)("div",{className:"VideoUploadForm-buttonGroup",children:[(0,a.tZ)(S.$U,{zaText:!0,zaType:"Button",zaBlock:"CancelPublishVideo",zaAction:"Close",as:U.ZP,preset:"secondary",color:"blue",css:{padding:"0 31px"},onClick:ea,children:"取消发布"}),(0,a.tZ)(z.r,{module:"Content",card:{content:{type:"Zvideo",token:et.id}},children:(0,a.tZ)(S.$U,{zaText:!0,zaType:"Button",zaBlock:"PublishVideo",zaAction:"Save",extra:{configMap:{publishSource:(null==et?void 0:et.zvideoState)||"upload"}},as:U.ZP,className:"VideoUploadForm-submitButton",preset:"primary",color:"blue",disabled:"uploadError"===en,css:{padding:"0 31px"},onClick:function(e){var t=function(e,t,n){var i=e.title,o=e.description,r=e.categoryFirstLevel,l=e.categorySecondLevelId,a=e.topics,c=e.zvideoType,d=eB(n);if(!i||i.length<5)return"视频标题至少 ".concat(5," 个字");if(i.length>d)return"视频标题最多 ".concat(d," 个字");if(o.length>300)return"视频描述最多 ".concat(300," 个字");if(!r)return"请选择所属领域";if(!l)return"请选择所属二级领域";if(!a.length)return"请绑定话题";if(!c)return"请选择类型";if(t){var s=t();if(s)return s}}({title:td,description:tp,categoryFirstLevel:tg,categorySecondLevelId:tx,topics:tS,zvideoType:tj},ei,ek);if(t)return tn(t,"red");w.Z.trackEvent(e.target,{id:7038,action:"Upload"},{button:{text:e0?"定时发布":"发布视频"}}),eh((0,o._)((0,i._)({id:et.id,videoId:et.videoId,title:td,description:tp,category:{firstLevel:tm,secondLevel:tx},zvideoType:tj,topicIds:tS.map(function(e){return e.id||e.urlToken}),imageUrl:tP,imageUrlFrom:tG||2,publishAt:e3},ey(eD)),{chapters:eE}),e0)},children:e0?"定时发布":"发布视频"})})]}),ex&&(0,a.tZ)(eS,{title:td,description:tp,imageUrl:tP,duration:(0,E.Z)(null===(j=et.video)||void 0===j?void 0:j.duration)})]})})})},29769:function(e,t,n){n.d(t,{tA:function(){return L},Lf:function(){return U},rt:function(){return C}});var i=n(94009),o=n(79065),r=n(85879),l=n(91850),a=n(41402),c=n(87363),d=n.n(c),s=n(30851),u=Object.assign;function p(e){var t;return d().createElement(s.Z,u(u({width:"16",height:"16",viewBox:"0 0 16 16"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--ArrowClockwise16"+(t?" "+t:"")}),d().createElement("path",{fillRule:"evenodd",d:"M9.75 1.777A6.65 6.65 0 1 0 7.124 14.76a.65.65 0 1 0 .142-1.292 5.35 5.35 0 1 1 4.77-1.987l-.117-1.07a.65.65 0 0 0-1.292.14l.254 2.324a.85.85 0 0 0 1.01.741l2.379-.472a.65.65 0 1 0-.253-1.275l-.759.15A6.649 6.649 0 0 0 9.75 1.778Z",clipRule:"evenodd"}))}var h=n(53778),f=n(1733),m=n(16563),v=n(65744),g=n(803),Z=n(71981);function x(){var e=(0,o._)(["\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n"]);return x=function(){return e},e}var b=(0,a.F4)(x()),B=function(e){var t=e.className,n=e.isLoading;return(0,r.BX)(f.sN,{className:t,css:function(e){return{display:"inline-flex",alignItems:"center",color:e.colors.GBK06A}},children:[(0,r.tZ)("span",{css:{display:"inline-flex",alignItems:"center",width:24,marginLeft:-24},children:(0,r.tZ)(p,{css:n?{animation:"".concat(b," 1s linear 600ms infinite")}:{}})}),n?"加载中...":"加载失败，点击「设置」重试"]})},y=function(e){var t=e.className,n=e.current,i=e.permissionItem,o=e.onClick,l=i.permission,a=i.text,c=i.disable,d=i.disableAlert;return l!==m.sO||n===l||(0,m.M1)()?(0,r.tZ)(Z.Z,{className:t,onClick:function(){c?(0,v.t)(d,{theme:"red-ghost"}):o(l,a)},checked:n===l,children:a}):null};function C(e){var t=e.current,n=e.target,o=e.type,a=e.onChange,d=e.className,s=(0,i._)((0,l.Z)(!1),2),u=s[0],p=s[1],f=(0,i._)((0,l.Z)(!0),2),Z=f[0],x=f[1],b=(0,h.useDispatch)(),C=n.type,_=n.id,k=o||C,w=(0,h.useSelector)(function(e){var t,n;return null===(t=e.commentPermission)||void 0===t?void 0:null===(n=t[k])||void 0===n?void 0:n[_]})||[];(0,c.useEffect)(function(){u||b((0,g.n5)(k,_)).finally(function(){x.off(),p.on()})},[b,k,_,u,p,x]),(0,c.useEffect)(function(){t!==m.sO||(0,m.M1)()||(0,m.UJ)()},[t]);var S=function(e,i){if(e!==t){if(!n){a(e);return}var o=n.id;n.adminClosedComment?(0,v.t)("此内容无法更改评论权限",{theme:"red-ghost"}):e===m.Kz||t===m.Kz?(0,v.y)("你确定要更改评论权限吗？",{content:e===m.Kz?"更改后，已有评论不变，新评论需要经过筛选才会公开显示":"更改后，所有待筛选评论都会被公开显示出来"}).then(function(){return a(o,e,i)}).catch(function(){return null}):a(o,e,i)}};return Z?(0,r.tZ)(B,{className:d,isLoading:!0}):Z||!u||w.length?(0,r.tZ)(r.HY,{children:w.map(function(e){return(0,r.tZ)(y,{className:d,permissionItem:e,onClick:S,current:t},e.permission)})}):(0,r.tZ)(B,{className:d})}var _=n(22107),k=n(94707),w=n(86325),S=n(85626),E=n(47842),z=n.p+"assets/deleteComment.d2efe0dc.gif",T=n(99447),N=function(e){(0,w._)(n,e);var t=(0,S._)(n);function n(){return(0,_._)(this,n),t.apply(this,arguments)}return(0,k._)(n,[{key:"render",value:function(){return(0,r.tZ)("img",{src:z,style:{maxWidth:"200px",marginTop:"30px"},alt:"delete-comment-success"})}}]),n}(c.Component);N.showModal=function(e){E.Z.open(function(t){var n=(e||{}).reportText;return setTimeout(t,2e3),(0,r.tZ)(E.Z,{title:"举报成功",onClose:t,children:(0,r.BX)("div",{style:{textAlign:"center"},children:[(0,r.tZ)("div",{children:n||"你的举报我们已经收到，处理完成后将会私信告知处理结果。"}),(0,r.tZ)(N,{})]})})})};var U=(0,T.a)({view:{id:3038},trackCardShow:!0})(N),R=n(20857),A=n(87320),M=n(38889),F=n(96611),L=function(e){(0,w._)(n,e);var t=(0,S._)(n);function n(){var e;return(0,_._)(this,n),e=t.apply(this,arguments),(0,A._)((0,R._)(e),"state",{reportModalShown:!1}),(0,A._)((0,R._)(e),"handleSubmit",function(){var t=e.props,n=t.id,i=t.onDelete,o=t.onClose;i(n),o()}),(0,A._)((0,R._)(e),"handleReportModalOpen",function(){return e.setState({reportModalShown:!0})}),(0,A._)((0,R._)(e),"handleReportModalClose",function(){e.setState({reportModalShown:!1}),e.handleSubmit()}),(0,A._)((0,R._)(e),"handleSuccess",function(){e.handleSubmit()}),e}return(0,k._)(n,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.shown,i=e.onClose,o=e.reportAndDeleteExperiment;return(0,r.BX)(c.Fragment,{children:[(0,r.tZ)(E.Z,{title:"你确定要删除这条评论吗？",closeButton:null,maskClosable:!1,hotKeyClosable:!1,onClose:i,footer:o&&(0,r.BX)("div",{className:"CommentDeleteAndReport-extra",children:["评论若构成举报条件可以",(0,r.tZ)(M.ZP,{preset:"link",onClick:this.handleReportModalOpen,children:"删除并举报"})]}),children:n&&(0,r.BX)(E.w,{direction:"horizontal",children:[(0,r.tZ)(M.ZP,{onClick:i,children:"取消"}),(0,r.tZ)(M.ZP,{preset:"primary",color:"blue",onClick:this.handleSubmit,children:"确定"})]})}),(0,r.tZ)(F.y,{title:"删除成功，请选择举报理由",subtitle:"",shown:this.state.reportModalShown,type:"comment",urlToken:t,zaEnabled:!0,onSuccess:this.handleSuccess,onClose:this.handleReportModalClose})]})}}]),n}(c.Component)},15299:function(e,t,n){n.d(t,{L:function(){return l}});var i=n(85879),o=n(87363),r=n(7917),l=function(e){var t=e.children,n=e.showPrivacyPage,l=e.authWrapperClassName,a=e.authChild,c=o.Children.only(t),d=a?o.Children.only(a):c;return n?(0,i.tZ)(r.Z,{wrapperClassName:l,loginButton:d}):c}},71981:function(e,t,n){var i=n(55164),o=n(57477),r=n(71728),l=n(85879),a=n(1733),c=n(16e3);t.Z=function(e){var t=e.checked,n=e.children,d=(0,r._)(e,["checked","children"]);return(0,l.BX)(a.sN,(0,o._)((0,i._)({},d),{children:[(0,l.tZ)("span",{css:{display:"inline-block",width:24,marginLeft:-24},children:t&&(0,l.tZ)(c.Y,{text:!0,center:!0})}),n]}))}},83931:function(e,t,n){n.d(t,{xP:function(){return c}});var i=n(87363),o=n.n(i),r=n(30851),l=Object.assign;function a(e){var t;return o().createElement(r.Z,l(l({width:"24",height:"24",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--PaperplaneFill24"+(t?" "+t:"")}),o().createElement("path",{d:"M19.47 1.914a.8.8 0 0 1 1.204.778l-1.872 16.386a.9.9 0 0 1-1.204.743l-4.615-1.692a.7.7 0 0 0-.831.28l-1.927 3.02c-.43.674-1.474.369-1.474-.43v-3.865a.8.8 0 0 1 .179-.504l5.808-7.148a.595.595 0 0 0-.897-.781l-5.93 6.354a1.1 1.1 0 0 1-1.258.252L2.57 13.46a.8.8 0 0 1-.08-1.415l16.98-10.13Z"}))}function c(e){return o().createElement(a,l(l({},e),{className:function(){return"Zi Zi--Share"+(e.className?" "+e.className:"")}}))}},14583:function(e,t,n){n.d(t,{Z:function(){return a},h:function(){return c}});var i=n(87363),o=n.n(i),r=n(30851),l=Object.assign;function a(e){var t;return o().createElement(r.Z,l(l({width:"24",height:"24",fill:"none",viewBox:"0 0 24 24"},e),{className:"function"==typeof(t=e.className)?t():"ZDI ZDI--Vip24"+(t?" "+t:"")}),o().createElement("path",{fill:"url(#id-1978186969-a)",d:"M21.351 4.858a3.114 3.114 0 0 1 1.577 2.702v8.88a3.114 3.114 0 0 1-1.577 2.702l-7.774 4.44a3.184 3.184 0 0 1-3.155 0l-7.773-4.44A3.114 3.114 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44Zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.443-1.573-1.16-1.982Zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12Z"}),o().createElement("defs",null,o().createElement("linearGradient",{id:"id-1978186969-a",x1:"3.479",x2:"21.812",y1:"4.463",y2:"21.357",gradientUnits:"userSpaceOnUse"},o().createElement("stop",{stopColor:"#F2D9B6"}),o().createElement("stop",{offset:"1",stopColor:"#BF8B43"}))))}function c(e){return o().createElement(a,l(l({},e),{className:function(){return"Zi Zi--VIP"+(e.className?" "+e.className:"")}}))}},14914:function(e,t,n){n.d(t,{Z:function(){return l}});var i=n(90063),o=n(8903),r=n(6889);function l(e,t){(0,r.Z)(2,arguments);var n=(0,i.Z)(t);return(0,o.Z)(e,6e4*n)}},73411:function(e,t,n){var i=n(5502),o=n(38928),r=n(87101),l=n(19876);e.exports=function(e){if(!((Number.isInteger(e)||e===1/0)&&e>0))throw TypeError("Expected `concurrency` to be a number from 1 and up");var t,n=[],a=0,c=function(){a--,n.length>0&&n.shift()()},d=(t=i._(function(e,t){var n,i,d,s,u=arguments;return r._(this,function(r){switch(r.label){case 0:for(i=Array((n=u.length)>2?n-2:0),d=2;d<n;d++)i[d-2]=u[d];a++,t(s=l.apply(void 0,[e].concat(o._(i)))),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,s];case 2:case 3:return r.sent(),[3,4];case 4:return c(),[2]}})}),function(e,n){return t.apply(this,arguments)}),s=function(t,l){for(var c=arguments.length,s=Array(c>2?c-2:0),u=2;u<c;u++)s[u-2]=arguments[u];n.push(d.bind.apply(d,[null,t,l].concat(o._(s)))),i._(function(){return r._(this,function(t){switch(t.label){case 0:return[4,Promise.resolve()];case 1:return t.sent(),a<e&&n.length>0&&n.shift()(),[2]}})})()},u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return new Promise(function(t){return s.apply(void 0,[e,t].concat(o._(n)))})};return Object.defineProperties(u,{activeCount:{get:function(){return a}},pendingCount:{get:function(){return n.length}},clearQueue:{value:function(){n.length=0}}}),u}},19876:function(e,t,n){var i=n(38928),o=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return new Promise(function(t){t(e.apply(void 0,i._(n)))})};e.exports=o,e.exports.default=o},33096:function(e,t,n){n.d(t,{Z:function(){return a}});var i=n(55164);n(87363);var o=n(25628),r=n.n(o),l=n(41402),a=function(e){var t=e.avatar,n=e.bottom,o=e.button,a=e.className,c=e.height,d=e.icon,s=e.inline,u=e.right,p=e.style,h=e.title,f=e.width,m=(0,i._)({},void 0===p?{}:p);return f&&(m.width="".concat(f,"px")),c&&(m.height="".concat(c,"px")),n&&(m.marginBottom="".concat(n,"px")),u&&(m.marginRight="".concat(u,"px")),(0,l.tZ)("div",{className:r()("Holder",a,{"Holder--inline":s,"Holder--title":h,"Holder--icon":d,"Holder--button":o,"Holder--avatar":t}),style:m})}},22715:function(e,t,n){n.d(t,{HC:function(){return m},ZP:function(){return s}});var i=n(71728),o=n(87462),r=n(87363),l=n.n(r),a=n(25628),c=n.n(a),d=n(41402),s=function(e){var t=e.className,n=e.title,r=e.options,l=e.children,a=(0,i._)(e,["className","title","options","children"]);return(0,d.tZ)("div",(0,o.Z)({className:c()("List",t)},a),(n||r)&&(0,d.tZ)("div",{className:"List-header"},(0,d.tZ)("h4",{className:"List-headerText"},n),(0,d.tZ)("div",{className:"List-headerOptions"},r)),l)},u=n(22107),p=n(94707),h=n(86325),f=n(85626),m=function(e){(0,h._)(n,e);var t=(0,f._)(n);function n(){return(0,u._)(this,n),t.apply(this,arguments)}return(0,p._)(n,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,i=e.meta,o=e.children,r=e.onRef;return(0,d.tZ)("div",{className:c()("List-item",t),tabIndex:n,ref:r},i&&(0,d.tZ)("div",{className:"List-itemMeta"},i),o)}}]),n}(l().Component);n(33096)},5502:function(e,t){function n(e,t,n,i,o,r,l){try{var a=e[r](l),c=a.value}catch(e){n(e);return}a.done?t(c):Promise.resolve(c).then(i,o)}t._=t._async_to_generator=function(e){return function(){var t=this,i=arguments;return new Promise(function(o,r){var l=e.apply(t,i);function a(e){n(l,o,r,a,c,"next",e)}function c(e){n(l,o,r,a,c,"throw",e)}a(void 0)})}}}}]);
//# sourceMappingURL=shared-344960c9bb3f9e501026d17224a6974d3281f1a3.8f0b80fe9f688ce1f13a.js.map